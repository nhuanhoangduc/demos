/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function g(a){throw a;}var j=void 0,p=!0,q=null,r=!1;function aa(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}var v,ba=this;function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return a!==j}function w(a){return a!=q}function fa(a){return"array"==da(a)}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function y(a){return"number"==typeof a}function ia(a){return"function"==da(a)}function ma(a){a=da(a);return"object"==a||"array"==a||"function"==a}function na(a){return a[oa]||(a[oa]=++qa)}
var oa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),qa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){a||g(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ra:sa;return ta.apply(q,arguments)}function ua(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var va=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=ba;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&ea(b)?d[f]=b:d=d[f]?d[f]:d[f]={}}function C(a,b){function c(){}c.prototype=b.prototype;a.B=b.prototype;a.prototype=new c};window["X.Counter"]=function(){var a=0;return{Se:function(){a+=1},di:function(){a+=-1},value:function(){return a}}}();
if(!Function.prototype.bind)Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c?this:a||window,f.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&g(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,f=d.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b};A("Function.prototype.bind",Function.prototype.bind);function wa(a){if(!xa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ya,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(za,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Aa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ba,"&quot;"));return a}var ya=/&/g,za=/</g,Aa=/>/g,Ba=/\"/g,xa=/[&<>\"]/;var Ca,Ea,Fa,Ga,Ha,Ia,Ja;function Ka(){return ba.navigator?ba.navigator.userAgent:q}function La(){return ba.navigator}Ha=Ga=Fa=Ea=Ca=r;var Ma;if(Ma=Ka()){var Na=La();Ca=0==Ma.indexOf("Opera");Ea=!Ca&&-1!=Ma.indexOf("MSIE");Ga=(Fa=!Ca&&-1!=Ma.indexOf("WebKit"))&&-1!=Ma.indexOf("Mobile");Ha=!Ca&&!Fa&&"Gecko"==Na.product}var Oa=Ca,D=Ea,Pa=Ha,E=Fa,Qa=Ga,Ra,Sa=La();Ra=Sa&&Sa.platform||"";Ia=-1!=Ra.indexOf("Mac");Ja=-1!=Ra.indexOf("Win");var Ta=!!La()&&-1!=(La().appVersion||"").indexOf("X11"),Va;
a:{var Wa="",Xa;if(Oa&&ba.opera)var Ya=ba.opera.version,Wa="function"==typeof Ya?Ya():Ya;else if(Pa?Xa=/rv\:([^\);]+)(\)|;)/:D?Xa=/MSIE\s+([^\);]+)(\)|;)/:E&&(Xa=/WebKit\/(\S+)/),Xa)var Za=Xa.exec(Ka()),Wa=Za?Za[1]:"";if(D){var $a,ab=ba.document;$a=ab?ab.documentMode:j;if($a>parseFloat(Wa)){Va=""+$a;break a}}Va=Wa}var bb={};
function G(a){var b;if(!(b=bb[a])){b=0;for(var c=(""+Va).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var h=c[e]||"",i=d[e]||"",k=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var l=k.exec(h)||["","",""],n=o.exec(i)||["","",""];if(0==l[0].length&&0==n[0].length)break;b=((0==l[1].length?0:parseInt(l[1],10))<(0==n[1].length?0:parseInt(n[1],10))?-1:(0==l[1].length?0:parseInt(l[1],
10))>(0==n[1].length?0:parseInt(n[1],10))?1:0)||((0==l[2].length)<(0==n[2].length)?-1:(0==l[2].length)>(0==n[2].length)?1:0)||(l[2]<n[2]?-1:l[2]>n[2]?1:0)}while(0==b)}b=bb[a]=0<=b}return b}var cb={};function db(a){return cb[a]||(cb[a]=D&&document.documentMode&&document.documentMode>=a)};function eb(a,b){for(var c in a)b.call(j,a[c],c,a)}function fb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function gb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var hb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function ib(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<hb.length;e++)c=hb[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var jb=Array.prototype,kb=jb.indexOf?function(a,b,c){return jb.indexOf.call(a,b,c)}:function(a,b,c){c=c==q?0:0>c?Math.max(0,a.length+c):c;if(x(a))return!x(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},lb=jb.forEach?function(a,b,c){jb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=x(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},mb=jb.map?function(a,b,c){return jb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),e=x(a)?
a.split(""):a,h=0;h<d;h++)h in e&&(f[h]=b.call(c,e[h],h,a));return f},nb=jb.some?function(a,b,c){return jb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=x(a)?a.split(""):a,e=0;e<d;e++)if(e in f&&b.call(c,f[e],e,a))return p;return r},ob=jb.every?function(a,b,c){return jb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=x(a)?a.split(""):a,e=0;e<d;e++)if(e in f&&!b.call(c,f[e],e,a))return r;return p};function pb(a,b){var c=kb(a,b);0<=c&&jb.splice.call(a,c,1)}
function qb(a){return jb.concat.apply(jb,arguments)}function rb(a){if(fa(a))return qb(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function sb(a,b,c){return 2>=arguments.length?jb.slice.call(a,b):jb.slice.call(a,b,c)};function tb(a){if("function"==typeof a.ia)a=a.ia();else if(ha(a)||x(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function ub(a){if("function"==typeof a.ba)return a.ba();if(x(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return fb(a)}function vb(a){if("function"==typeof a.Ub)return a.Ub();if("function"!=typeof a.ba){if(ha(a)||x(a)){for(var b=[],a=a.length,c=0;c<a;c++)b.push(c);return b}return gb(a)}}
function wb(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ha(a)||x(a))lb(a,b,c);else for(var d=vb(a),f=ub(a),e=f.length,h=0;h<e;h++)b.call(c,f[h],d&&d[h],a)}function xb(a,b){if("function"==typeof a.every)return a.every(b,j);if(ha(a)||x(a))return ob(a,b,j);for(var c=vb(a),d=ub(a),f=d.length,e=0;e<f;e++)if(!b.call(j,d[e],c&&c[e],a))return r;return p};var yb="StopIteration"in ba?ba.StopIteration:Error("StopIteration");function zb(){}zb.prototype.next=function(){g(yb)};zb.prototype.yb=function(){return this};function Ab(a){if(a instanceof zb)return a;if("function"==typeof a.yb)return a.yb(r);if(ha(a)){var b=0,c=new zb;c.next=function(){for(;;){b>=a.length&&g(yb);if(b in a)return a[b++];b++}};return c}g(Error("Not implemented"))}
function Bb(a,b){if(ha(a))try{lb(a,b,j)}catch(c){c!==yb&&g(c)}else{a=Ab(a);try{for(;;)b.call(j,a.next(),j,a)}catch(d){d!==yb&&g(d)}}};function H(a,b){this.q={};this.k=[];var c=arguments.length;if(1<c){c%2&&g(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.pd(a)}v=H.prototype;v.h=0;v.kc=0;v.ia=t("h");v.ba=function(){Gb(this);for(var a=[],b=0;b<this.k.length;b++)a.push(this.q[this.k[b]]);return a};v.Ub=function(){Gb(this);return this.k.concat()};v.td=function(a){for(var b=0;b<this.k.length;b++){var c=this.k[b];if(Hb(this.q,c)&&this.q[c]==a)return p}return r};
v.Pb=function(a,b){if(this===a)return p;if(this.h!=a.ia())return r;var c=b||Ib;Gb(this);for(var d,f=0;d=this.k[f];f++)if(!c(this.get(d),a.get(d)))return r;return p};function Ib(a,b){return a===b}v.clear=function(){this.q={};this.kc=this.h=this.k.length=0};v.remove=function(a){return Hb(this.q,a)?(delete this.q[a],this.h--,this.kc++,this.k.length>2*this.h&&Gb(this),p):r};
function Gb(a){if(a.h!=a.k.length){for(var b=0,c=0;b<a.k.length;){var d=a.k[b];Hb(a.q,d)&&(a.k[c++]=d);b++}a.k.length=c}if(a.h!=a.k.length){for(var f={},c=b=0;b<a.k.length;)d=a.k[b],Hb(f,d)||(a.k[c++]=d,f[d]=1),b++;a.k.length=c}}v.get=function(a,b){return Hb(this.q,a)?this.q[a]:b};v.set=function(a,b){Hb(this.q,a)||(this.h++,this.k.push(a),this.kc++);this.q[a]=b};v.pd=function(a){var b;a instanceof H?(b=a.Ub(),a=a.ba()):(b=gb(a),a=fb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};v.c=function(){return new H(this)};
v.yb=function(a){Gb(this);var b=0,c=this.k,d=this.q,f=this.kc,e=this,h=new zb;h.next=function(){for(;;){f!=e.kc&&g(Error("The map has changed since the iterator was created"));b>=c.length&&g(yb);var h=c[b++];return a?h:d[h]}};return h};function Hb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Jb(a){this.q=new H;a&&this.pd(a)}function Kb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+na(a):b.substr(0,1)+a}v=Jb.prototype;v.ia=function(){return this.q.ia()};v.add=function(a){this.q.set(Kb(a),a)};v.pd=function(a){for(var a=ub(a),b=a.length,c=0;c<b;c++)this.add(a[c])};v.Nc=function(a){for(var a=ub(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};v.remove=function(a){return this.q.remove(Kb(a))};v.clear=function(){this.q.clear()};
v.contains=function(a){a=Kb(a);return Hb(this.q.q,a)};v.Ue=function(a){for(var b=new Jb,a=ub(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};v.ba=function(){return this.q.ba()};v.c=function(){return new Jb(this)};v.Pb=function(a){return this.ia()==tb(a)&&Lb(this,a)};
function Lb(a,b){var c=tb(b);if(a.ia()>c)return r;!(b instanceof Jb)&&5<c&&(b=new Jb(b));return xb(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.td)a=b.td(a);else if(ha(b)||x(b))a=0<=kb(b,a);else a:{for(var c in b)if(b[c]==a){a=p;break a}a=r}return a})}v.yb=function(){return this.q.yb(r)};function Mb(){}Mb.prototype.Fe=r;Mb.prototype.$=function(){if(!this.Fe)this.Fe=p,this.t()};Mb.prototype.t=function(){this.kg&&Nb.apply(q,this.kg)};function Ob(a){a&&"function"==typeof a.$&&a.$()}function Nb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Nb.apply(q,d):Ob(d)}};function Pb(a,b){this.$e=b;this.Sb=[];a>this.$e&&g(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Sb.push(this.xc())}C(Pb,Mb);v=Pb.prototype;v.Be=q;v.Ee=q;function Qb(a,b){a.Sb.length<a.$e?a.Sb.push(b):a.xd(b)}v.xc=function(){return this.Be?this.Be():{}};v.xd=function(a){if(this.Ee)this.Ee(a);else if(ma(a))if(ia(a.$))a.$();else for(var b in a)delete a[b]};v.t=function(){Pb.B.t.call(this);for(var a=this.Sb;a.length;)this.xd(a.pop());delete this.Sb};function Rb(){this.Qb=[];this.Od=new H;this.Kf=this.Lf=this.Mf=this.Ff=0;this.jc=new H;this.ye=this.Jf=0;this.Id=1;this.yd=new Pb(0,4E3);this.yd.xc=function(){return new Sb};this.Gf=new Pb(0,50);this.Gf.xc=function(){return new Tb};var a=this;this.Bd=new Pb(0,2E3);this.Bd.xc=function(){return""+a.Id++};this.Bd.xd=function(){};this.jg=3}function Tb(){this.Xd=this.Hf=this.Z=0}
Tb.prototype.toString=function(){var a=[];a.push(this.type," ",this.Z," (",Math.round(10*this.Hf)/10," ms)");this.Xd&&a.push(" [VarAlloc = ",this.Xd,"]");return a.join("")};function Sb(){}function Ub(a,b,c,d){var f=[];-1==c?f.push("    "):f.push(Vb(a.Ie-c));f.push(" ",Wb(a.Ie-b));0==a.zd?f.push(" Start        "):1==a.zd?(f.push(" Done "),f.push(Vb(a.li-a.startTime)," ms ")):f.push(" Comment      ");f.push(d,a);0<a.qh&&f.push("[VarAlloc ",a.qh,"] ");return f.join("")}
Sb.prototype.toString=function(){return this.type==q?this.hg:"["+this.type+"] "+this.hg};Rb.prototype.reset=function(a){this.jg=a;for(a=0;a<this.Qb.length;a++){var b=this.yd.id;b&&Qb(this.Bd,b);Qb(this.yd,this.Qb[a])}this.Qb.length=0;this.Od.clear();this.Ff=va();this.ye=this.Jf=this.Kf=this.Lf=this.Mf=0;b=this.jc.Ub();for(a=0;a<b.length;a++){var c=this.jc.get(b[a]);c.Z=0;c.Hf=0;c.Xd=0;Qb(this.Gf,c)}this.jc.clear()};
Rb.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Qb.length;d++){var f=this.Qb[d];1==f.zd&&c.pop();a.push(" ",Ub(f,this.Ff,b,c.join("")));b=f.Ie;a.push("\n");0==f.zd&&c.push("|  ")}if(0!=this.Od.ia()){var e=va();a.push(" Unstopped timers:\n");Bb(this.Od,function(b){a.push("  ",b," (",e-b.startTime," ms, started at ",Wb(b.startTime),")\n")})}b=this.jc.Ub();for(d=0;d<b.length;d++)c=this.jc.get(b[d]),1<c.Z&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Jf,"\n","Total comments created ",
this.ye,"\n","Overhead start: ",this.Mf," ms\n","Overhead end: ",this.Lf," ms\n","Overhead comment: ",this.Kf," ms\n");return a.join("")};function Vb(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Wb(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new Rb;function Xb(){}var Yb=0;v=Xb.prototype;v.key=0;v.rb=r;v.qd=r;v.ja=function(a,b,c,d,f,e){ia(a)?this.Ve=p:a&&a.handleEvent&&ia(a.handleEvent)?this.Ve=r:g(Error("Invalid listener argument"));this.$b=a;this.yf=b;this.src=c;this.type=d;this.capture=!!f;this.Ad=e;this.qd=r;this.key=++Yb;this.rb=r};v.handleEvent=function(a){return this.Ve?this.$b.call(this.Ad||this.src,a):this.$b.handleEvent.call(this.$b,a)};!D||db(9);var Zb=!D||db(9),$b=D&&!G("8");!E||G("528");Pa&&G("1.9b")||D&&G("8")||Oa&&G("9.5")||E&&G("528");!Pa||G("8");function ac(a,b){this.type=a;this.currentTarget=this.target=b}C(ac,Mb);v=ac.prototype;v.t=function(){delete this.type;delete this.target;delete this.currentTarget};v.ab=r;v.fc=p;v.stopPropagation=function(){this.ab=p};v.preventDefault=function(){this.fc=r};function bc(a){bc[" "](a);return a}bc[" "]=ca;function dc(a,b){a&&this.ja(a,b)}C(dc,ac);v=dc.prototype;v.target=q;v.relatedTarget=q;v.offsetX=0;v.offsetY=0;v.clientX=0;v.clientY=0;v.screenX=0;v.screenY=0;v.button=0;v.keyCode=0;v.charCode=0;v.ctrlKey=r;v.altKey=r;v.shiftKey=r;v.metaKey=r;v.Qg=r;v.ha=q;
v.ja=function(a,b){var c=this.type=a.type;ac.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Pa){var f;a:{try{bc(d.nodeName);f=p;break a}catch(e){}f=r}f||(d=q)}}else if("mouseover"==c)d=a.fromElement;else if("mouseout"==c)d=a.toElement;this.relatedTarget=d;this.offsetX=E||a.offsetX!==j?a.offsetX:a.layerX;this.offsetY=E||a.offsetY!==j?a.offsetY:a.layerY;this.clientX=a.clientX!==j?a.clientX:a.pageX;this.clientY=a.clientY!==j?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Qg=Ia?a.metaKey:a.ctrlKey;this.state=a.state;this.ha=a;delete this.fc;delete this.ab};v.stopPropagation=function(){dc.B.stopPropagation.call(this);this.ha.stopPropagation?this.ha.stopPropagation():this.ha.cancelBubble=p};
v.preventDefault=function(){dc.B.preventDefault.call(this);var a=this.ha;if(a.preventDefault)a.preventDefault();else if(a.returnValue=r,$b)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};v.tg=t("ha");v.t=function(){dc.B.t.call(this);this.relatedTarget=this.currentTarget=this.target=this.ha=q};var ec={},hc={},ic={},jc={};
function I(a,b,c,d,f){if(b){if(fa(b)){for(var e=0;e<b.length;e++)I(a,b[e],c,d,f);return q}var d=!!d,h=hc;b in h||(h[b]={h:0,V:0});h=h[b];d in h||(h[d]={h:0,V:0},h.h++);var h=h[d],i=na(a),k;h.V++;if(h[i]){k=h[i];for(e=0;e<k.length;e++)if(h=k[e],h.$b==c&&h.Ad==f){if(h.rb)break;return k[e].key}}else k=h[i]=[],h.h++;e=kc();e.src=a;h=new Xb;h.ja(c,e,a,b,d,f);c=h.key;e.key=c;k.push(h);ec[c]=h;ic[i]||(ic[i]=[]);ic[i].push(h);a.addEventListener?(a==ba||!a.Ce)&&a.addEventListener(b,e,d):a.attachEvent(b in
jc?jc[b]:jc[b]="on"+b,e);return c}g(Error("Invalid event type"))}function kc(){var a=lc,b=Zb?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function mc(a,b,c,d,f){if(fa(b))for(var e=0;e<b.length;e++)mc(a,b[e],c,d,f);else a=I(a,b,c,d,f),ec[a].qd=p}
function nc(a,b,c,d,f){if(fa(b))for(var e=0;e<b.length;e++)nc(a,b[e],c,d,f);else{d=!!d;a:{e=hc;if(b in e&&(e=e[b],d in e&&(e=e[d],a=na(a),e[a]))){a=e[a];break a}a=q}if(a)for(e=0;e<a.length;e++)if(a[e].$b==c&&a[e].capture==d&&a[e].Ad==f){oc(a[e].key);break}}}
function oc(a){if(!ec[a])return r;var b=ec[a];if(b.rb)return r;var c=b.src,d=b.type,f=b.yf,e=b.capture;c.removeEventListener?(c==ba||!c.Ce)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in jc?jc[d]:jc[d]="on"+d,f);c=na(c);f=hc[d][e][c];if(ic[c]){var h=ic[c];pb(h,b);0==h.length&&delete ic[c]}b.rb=p;f.df=p;pc(d,e,c,f);delete ec[a];return p}
function pc(a,b,c,d){if(!d.Gc&&d.df){for(var f=0,e=0;f<d.length;f++)d[f].rb?d[f].yf.src=q:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.df=r;0==e&&(delete hc[a][b][c],hc[a][b].h--,0==hc[a][b].h&&(delete hc[a][b],hc[a].h--),0==hc[a].h&&delete hc[a])}}function qc(a){var b,c=0,d=b==q;b=!!b;if(a==q)eb(ic,function(a){for(var f=a.length-1;0<=f;f--){var e=a[f];if(d||b==e.capture)oc(e.key),c++}});else if(a=na(a),ic[a])for(var a=ic[a],f=a.length-1;0<=f;f--){var e=a[f];if(d||b==e.capture)oc(e.key),c++}}
function rc(a){var b=sc,a=na(a),c=ic[a];if(c){var d=ea(b),f=ea(j);return d&&f?(c=hc[b],!!c&&!!c[j]&&a in c[j]):!d&&!f?p:nb(c,function(a){return d&&a.type==b||f&&a.capture==j})}return r}function tc(a,b,c,d,f){var e=1,b=na(b);if(a[b]){a.V--;a=a[b];a.Gc?a.Gc++:a.Gc=1;try{for(var h=a.length,i=0;i<h;i++){var k=a[i];k&&!k.rb&&(e&=uc(k,f)!==r)}}finally{a.Gc--,pc(c,d,b,a)}}return Boolean(e)}function uc(a,b){var c=a.handleEvent(b);a.qd&&oc(a.key);return c}
function lc(a,b){if(!ec[a])return p;var c=ec[a],d=c.type,f=hc;if(!(d in f))return p;var f=f[d],e,h;if(!Zb){var i;if(!(i=b))a:{i="window.event".split(".");for(var k=ba;e=i.shift();)if(w(k[e]))k=k[e];else{i=q;break a}i=k}e=i;i=p in f;k=r in f;if(i){if(0>e.keyCode||e.returnValue!=j)return p;a:{var o=r;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(l){o=p}if(o||e.returnValue==j)e.returnValue=p}}o=new dc;o.ja(e,this);e=p;try{if(i){for(var n=[],m=o.currentTarget;m;m=m.parentNode)n.push(m);h=f[p];h.V=h.h;
for(var s=n.length-1;!o.ab&&0<=s&&h.V;s--)o.currentTarget=n[s],e&=tc(h,n[s],d,p,o);if(k){h=f[r];h.V=h.h;for(s=0;!o.ab&&s<n.length&&h.V;s++)o.currentTarget=n[s],e&=tc(h,n[s],d,r,o)}}else e=uc(c,o)}finally{if(n)n.length=0;o.$()}return e}d=new dc(b,this);try{e=uc(c,d)}finally{d.$()}return e}var vc=0;function wc(a){return a+"_"+vc++};function K(a){ac.call(this,a);this._className="event"}C(K,ac);var xc=wc("pan"),yc=wc("rotate"),zc=wc("zoom"),Ac=wc("render"),Bc=wc("resetview"),sc=wc("modified"),Cc=wc("progress"),Dc=wc("hover"),Ec=wc("hover_end"),Fc={Ih:xc,Oh:yc,$h:zc,Mh:Ac,Nh:Bc,Dh:sc,Lh:Cc,Bh:Dc,Ch:Ec};function Gc(){K.call(this,xc);this.fb=new Hc(0,0)}C(Gc,K);function Ic(){K.call(this,yc);this.fb=new Hc(0,0);this.Tf=0}C(Ic,K);function Jc(){K.call(this,zc);this.za=this.Ra=r}C(Jc,K);
function Kc(){K.call(this,Ac);this.ci=Date.now()}C(Kc,K);function Lc(){K.call(this,Dc);this.wc=this.vc=0}C(Lc,K);function Mc(){K.call(this,Ec)}C(Mc,K);function Nc(){K.call(this,Bc)}C(Nc,K);function Oc(){K.call(this,sc);this.Ha=new L}C(Oc,K);function Pc(){K.call(this,Cc);this.ue=0}C(Pc,K);A("X.event",K);A("X.event.events",Fc);A("X.event.uniqueId",function(a){return wc(a)});A("X.event.PanEvent",Gc);A("X.event.RotateEvent",Ic);A("X.event.ZoomEvent",Jc);A("X.event.RenderEvent",Kc);
A("X.event.ResetViewEvent",Nc);A("X.event.ModifiedEvent",Oc);A("X.event.HoverEvent",Lc);A("X.event.ProgressEvent",Pc);function Qc(a,b,c){this.x=ea(a)?a:0;this.y=ea(b)?b:0;this.b=ea(c)?c:0}Qc.prototype.c=function(){return new Qc(this.x,this.y,this.b)};Qc.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.b+")"};Qc.prototype.If=function(){return[this.x,this.y,this.b]};function N(a,b,c){this.x=a;this.y=b;this.b=c}C(N,Qc);v=N.prototype;v.c=function(){return new N(this.x,this.y,this.b)};v.Hc=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};v.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};v.z=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};v.normalize=function(){return this.scale(1/this.Hc())};v.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
v.ma=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};v.Pb=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Rc(a,b){return new N(a.x+b.x,a.y+b.y,a.b+b.b)}function Sc(a,b){return new N(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function Tc(){}C(Tc,Mb);v=Tc.prototype;v.Ce=p;v.Jc=q;v.Sd=aa("Jc");v.addEventListener=function(a,b,c,d){I(this,a,b,c,d)};v.removeEventListener=function(a,b,c,d){nc(this,a,b,c,d)};
v.dispatchEvent=function(a){var b=a.type||a,c=hc;if(b in c){if(x(a))a=new ac(a,this);else if(a instanceof ac)a.target=a.target||this;else{var d=a,a=new ac(b,this);ib(a,d)}var d=1,f,c=c[b],b=p in c,e;if(b){f=[];for(e=this;e;e=e.Jc)f.push(e);e=c[p];e.V=e.h;for(var h=f.length-1;!a.ab&&0<=h&&e.V;h--)a.currentTarget=f[h],d&=tc(e,f[h],a.type,p,a)&&a.fc!=r}if(r in c)if(e=c[r],e.V=e.h,b)for(h=0;!a.ab&&h<f.length&&e.V;h++)a.currentTarget=f[h],d&=tc(e,f[h],a.type,r,a)&&a.fc!=r;else for(f=this;!a.ab&&f&&e.V;f=
f.Jc)a.currentTarget=f,d&=tc(e,f,a.type,r,a)&&a.fc!=r;a=Boolean(d)}else a=p;return a};v.t=function(){Tc.B.t.call(this);qc(this);this.Jc=q};function O(){this._className="base";this.d=r}C(O,Tc);O.prototype.className=t("_className");O.prototype.print=function(){var a=Object.keys(this),b="",c="<unknown>",d=0;for(d in a){var f="this."+a[d],e=eval(f);"this._className"==f?c=e:b+=f+": "+e+"\n"}return"== X."+c+" ==\n"+b};O.prototype.mg=t("d");O.prototype.va=function(){this.d=r};A("X.base",O);A("X.base.prototype.className",O.prototype.className);A("X.base.prototype.print",O.prototype.print);A("X.base.prototype.dirty",O.prototype.mg);
A("X.base.prototype.setClean",O.prototype.va);function P(a){O.call(this);this._className="triplets";this.Da=this.Ga=this.Ca=this.Fa=this.Ba=this.Ea=q;this.mc=[0,0,0];this.U=[];if(w(a)&&a instanceof P)this.U=a.all().slice(),this.Ea=a.Ea,this.Ba=a.Ba,this.Fa=a.Fa,this.Ca=a.Ca,this.Ga=a.Ga,this.Da=a.Da,this.mc=a.mc.slice()}C(P,O);v=P.prototype;
v.add=function(a,b,c){(!y(a)||!y(b)||!y(c))&&g(Error("Invalid triplet."));if(!this.Ea||a<this.Ea)this.Ea=a;if(!this.Ba||a>this.Ba)this.Ba=a;if(!this.Fa||b<this.Fa)this.Fa=b;if(!this.Ca||b>this.Ca)this.Ca=b;if(!this.Ga||c<this.Ga)this.Ga=c;if(!this.Da||c>this.Da)this.Da=c;this.mc=[(this.Ea+this.Ba)/2,(this.Fa+this.Ca)/2,(this.Ga+this.Da)/2];this.d=p;return this.U.push(a,b,c)/3};v.get=function(a){(!y(a)||3*a>this.U.length)&&g(Error("Invalid id."));a*=3;return[this.U[a],this.U[a+1],this.U[a+2]]};
v.remove=function(a){(!y(a)||3*a>this.U.length)&&g(Error("Invalid id."));this.U.splice(a,3);this.d=p};v.all=t("U");v.clear=function(){this.U=[];this.d=p};v.Z=function(){return this.U.length/3};v.length=function(){return this.U.length};A("X.triplets",P);A("X.triplets.prototype.add",P.prototype.add);A("X.triplets.prototype.get",P.prototype.get);A("X.triplets.prototype.remove",P.prototype.remove);A("X.triplets.prototype.all",P.prototype.all);A("X.triplets.prototype.clear",P.prototype.clear);
A("X.triplets.prototype.count",P.prototype.Z);A("X.triplets.prototype.length",P.prototype.length);function Uc(){O.call(this);this._className="parser"}C(Uc,O);v=Uc.prototype;v.parse=function(){g(Error("The function parse() should be overloaded."))};v.ec=function(a,b){var c=this.s(a,b+2),d=this.s(a,b+3),f=(d<<1&255|c>>7)-127,c=(c&127)<<16|this.s(a,b+1)<<8|this.s(a,b);return 0==c&&-127==f?0:(1-2*(d>>7))*(1+c*Math.pow(2,-23))*Math.pow(2,f)};
function Vc(a,b,c){var d=a.s(b,c),f=a.s(b,c+1),e=(d<<1&255|f>>7)-127,a=(f&127)<<16|a.s(b,c+2)<<8|a.s(b,c+3);return 0==a&&-127==e?0:(1-2*(d>>7))*(1+a*Math.pow(2,-23))*Math.pow(2,e)}function Wc(a,b,c,d){var f=[],e=0,h=Infinity,i;for(i=0;i<d;i++){var k=a.ec(b,c+4*i);f[i]=k;e=Math.max(e,k);h=Math.min(h,k)}return[f,e,h]}function Xc(a,b,c){return(a.s(b,c+3)<<24)+(a.s(b,c+2)<<16)+(a.s(b,c+1)<<8)+a.s(b,c)}function Yc(a,b,c){return(a.s(b,c)<<24)+(a.s(b,c+1)<<16)+(a.s(b,c+2)<<8)+a.s(b,c+3)}
v.Mc=function(a,b){return(this.s(a,b+1)<<8)+this.s(a,b)};v.Og=function(a,b){var c=this.s(a,b);return 127<c?c-256:c};v.s=function(a,b){return a.charCodeAt(b)&255};A("X.parser",Uc);A("X.parser.prototype.parse",Uc.prototype.parse);function Zc(){Uc.call(this);this._className="parserTRK"}C(Zc,Uc);
Zc.prototype.parse=function(a,b){var c=a.j,d=a.m,f=a.W,e=0,h=e+6,i=0,k=Infinity,o;for(o=0;3>o;o++)var l=this.Mc(b,h+2*o),i=Math.max(i,l),k=Math.min(k,l);var n=Wc(this,b,e+12,3);Wc(this,b,e+24,3);var m=this.Mc(b,e+36),s=this.Mc(b,e+238);Wc(this,b,e+440,16);Wc(this,b,e+956,6);for(var h=Xc(this,b,e+988),e=Xc(this,b,e+996),i=[],u=q,z=q,B=q,F=q,Y=l=q,k=0;k<h;k++){var M=Xc(this,b,e),J=new P,e=e+4;for(o=0;o<M;o++){var ja=this.ec(b,e),e=e+4,ga=this.ec(b,e),e=e+4,ka=this.ec(b,e),e=e+4;0<m&&(Wc(this,b,e,m),
e+=4*m);ja/=n[0];ga/=n[1];ka/=n[2];J.add(ja,ga,ka)}0<s&&(e+=4*s);o=J.Ea;var M=J.Ba,ja=J.Fa,ga=J.Ca,ka=J.Ga,cc=J.Da;if(!u||o<u)u=o;if(!z||M>z)z=M;if(!B||ja<B)B=ja;if(!F||ga>F)F=ga;if(!l||ka<l)l=ka;if(!Y||cc>Y)Y=cc;i.push(J)}e=(u+z)/2;B=(B+F)/2;l=(l+Y)/2;for(k=0;k<h;k++){Y=i[k];F=Y.Z();for(o=0;o<F-1;o++)m=Y.get(o),n=Y.get(o+1),c.add(m[0],m[1],m[2]),c.add(n[0],n[1],n[2]),s=m[0]-e,u=m[1]-B,z=m[2]-l,J=Math.sqrt(s*s+u*u+z*z),M=n[0]-e,ja=n[1]-B,ga=n[2]-l,ka=Math.sqrt(M*M+ja*ja+ga*ga),d.add(s/J,u/J,z/J),
d.add(M/ka,ja/ka,ga/ka),n=[Math.abs(n[0]-m[0]),Math.abs(n[1]-m[1]),Math.abs(n[2]-m[2])],m=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),n[0]/=m,n[1]/=m,n[2]/=m,f.add(n[0],n[1],n[2]),f.add(n[0],n[1],n[2])}a.ub($c);c=new Oc;c.Ha=a;this.dispatchEvent(c)};A("X.parserTRK",Zc);A("X.parserTRK.prototype.parse",Zc.prototype.parse);function ad(){Uc.call(this);this._className="parserSTL"}C(ad,Uc);ad.prototype.parse=function(a,b){for(var c=b.split("\n"),d=c.length,f=a.j,e=a.m,h=0,i=d%8;i--;)this.r(f,e,c[h]),h++;for(i=0.125*d^0;i--;)this.r(f,e,c[h]),h++,this.r(f,e,c[h]),h++,this.r(f,e,c[h]),h++,this.r(f,e,c[h]),h++,this.r(f,e,c[h]),h++,this.r(f,e,c[h]),h++,this.r(f,e,c[h]),h++,this.r(f,e,c[h]),h++;c=new Oc;c.Ha=a;this.dispatchEvent(c)};
ad.prototype.r=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),d=c.split(" ");if("vertex"==d[0]){var c=parseFloat(d[1]),f=parseFloat(d[2]),d=parseFloat(d[3]);a.add(c,f,d)}else"facet"==d[0]&&(c=parseFloat(d[2]),f=parseFloat(d[3]),d=parseFloat(d[4]),b.add(c,f,d),b.add(c,f,d),b.add(c,f,d))};A("X.parserSTL",ad);A("X.parserSTL.prototype.parse",ad.prototype.parse);A("X.parserSTL.prototype.parseLine",ad.prototype.r);function Q(a,b,c){this.S=this.R=this.Q=0;3==arguments.length?(this.Q=Number(a),this.R=Number(b),this.S=Number(c)):"x"in a&&"y"in a&&"z"in a?(this.Q=Number(a.x()),this.R=Number(a.y()),this.S=Number(a.b())):(this.Q=Number(a[0]),this.R=Number(a[1]),this.S=Number(a[2]))}
Q.prototype={c:function(){return new Q(this.Q,this.R,this.S)},Ic:function(){return new Q(-this.Q,-this.R,-this.S)},$a:function(a){return new Q(this.Q+a.x(),this.R+a.y(),this.S+a.b())},ob:function(a){return new Q(this.Q-a.x(),this.R-a.y(),this.S-a.b())},xa:function(a){return new Q(this.Q*a,this.R*a,this.S*a)},Ge:function(a){return new Q(this.Q/a,this.R/a,this.S/a)},Xa:function(a){return this.Q*a.x()+this.R*a.y()+this.S*a.b()},Fd:function(a,b){return this.$a(a.ob(this).xa(b))},length:function(){return Math.sqrt(this.Xa(this))},
wb:function(){return this.Ge(this.length())},yc:function(a){return new Q(this.R*a.b()-this.S*a.y(),this.S*a.x()-this.Q*a.b(),this.Q*a.y()-this.R*a.x())},x:t("Q"),y:t("R"),b:t("S")};A("csgVector",Q);A("csgVector.prototype.clone",Q.prototype.c);A("csgVector.prototype.plus",Q.prototype.$a);A("csgVector.prototype.minus",Q.prototype.ob);A("csgVector.prototype.dividedBy",Q.prototype.Ge);A("csgVector.prototype.times",Q.prototype.xa);A("csgVector.prototype.dot",Q.prototype.Xa);
A("csgVector.prototype.lerp",Q.prototype.Fd);A("csgVector.prototype.length",Q.prototype.length);A("csgVector.prototype.unit",Q.prototype.wb);A("csgVector.prototype.cross",Q.prototype.yc);A("csgVector.prototype.negated",Q.prototype.Ic);A("csgVector.prototype.x",Q.prototype.x);A("csgVector.prototype.y",Q.prototype.y);A("csgVector.prototype.z",Q.prototype.b);function bd(){this.Oc=j}
function cd(a,b,c){switch(typeof b){case "string":dd(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==q){c.push("null");break}if(fa(b)){var d=b.length;c.push("[");for(var f="",e=0;e<d;e++)c.push(f),f=b[e],cd(a,a.Oc?a.Oc.call(b,""+e,f):f,c),f=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),dd(e,c),c.push(":"),
cd(a,a.Oc?a.Oc.call(b,e,f):f,c),d=","));c.push("}");break;case "function":break;default:g(Error("Unknown type: "+typeof b))}}var ed={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"},fd=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function dd(a,b){b.push('"',a.replace(fd,function(a){if(a in ed)return ed[a];var b=a.charCodeAt(0),f="\\u";16>b?f+="000":256>b?f+="00":4096>b&&(f+="0");return ed[a]=f+b.toString(16)}),'"')};function gd(){O.call(this);this._className="indexer";this.od=[];this.bi=[];this.fd={}}C(gd,O);gd.prototype.add=function(a){w(a)||g(Error("Invalid object."));var b;b=[];cd(new bd,a,b);b=b.join("");if(!(b in this.fd))this.fd[b]=this.od.length,this.od.push(a);return this.fd[b]};gd.prototype.unique=t("od");A("X.indexer.prototype.add",gd.prototype.add);A("X.indexer.prototype.unique",gd.prototype.unique);function R(a,b){this.J=new Q(a);this.w=new Q(b)}R.prototype={c:function(){return new R(this.J.c(),this.w.c())},ra:function(){this.w=this.w.Ic()},Te:function(a,b){return new R(this.J.Fd(a.J,b),this.w.Fd(a.w,b))},Tg:t("J"),Jd:t("w")};A("csgVertex",R);A("csgVertex.prototype.clone",R.prototype.c);A("csgVertex.prototype.flip",R.prototype.ra);A("csgVertex.prototype.interpolate",R.prototype.Te);A("csgVertex.prototype.pos",R.prototype.Tg);A("csgVertex.prototype.normal",R.prototype.Jd);function hd(a,b){this.w=a;this.xb=b}hd.prototype={c:function(){return new hd(this.w.c(),this.xb)},ra:function(){this.w=this.w.Ic();this.xb=-this.xb},yh:t("xb"),Jd:t("w")};A("csgPlane.prototype.w",hd.prototype.yh);A("csgPlane.prototype.normal",hd.prototype.Jd);function id(a,b){this.na=a;this.hc=b;var c=a[0].J,d=a[2].J,d=a[1].J.ob(c).yc(d.ob(c)).wb();this.O=new hd(d,d.Xa(c))}
id.prototype={c:function(){var a=this.na.map(function(a){return a.c()});return new id(a,this.hc)},ra:function(){this.na.reverse().map(function(a){a.ra()});this.O.ra()},xh:t("na"),jh:t("hc"),Ef:function(a,b,c,d,f){for(var e=0,h=[],i=0;i<this.na.length;i++){var k=a.w.Xa(this.na[i].J)-a.xb,k=-1.0E-5>k?2:1.0E-5<k?1:0,e=e|k;h.push(k)}switch(e){case 0:(0<a.w.Xa(this.O.w)?b:c).push(this);break;case 1:d.push(this);break;case 2:f.push(this);break;case 3:b=[];c=[];for(i=0;i<this.na.length;i++){var o=(i+1)%
this.na.length,k=h[i],l=h[o],e=this.na[i],o=this.na[o];2!=k&&b.push(e);1!=k&&c.push(2!=k?e.c():e);3==(k|l)&&(k=(a.xb-a.w.Xa(e.J))/a.w.Xa(o.J.ob(e.J)),k=e.Te(o,k),b.push(k),c.push(k.c()))}3<=b.length&&d.push(new id(b,this.hc));3<=c.length&&f.push(new id(c,this.hc))}}};A("csgPolygon",id);A("csgPolygon.prototype.clone",id.prototype.c);A("csgPolygon.prototype.flip",id.prototype.ra);A("csgPolygon.prototype.vertices",id.prototype.xh);A("csgPolygon.prototype.shared",id.prototype.jh);function jd(a){this.C=this.D=this.O=q;this.i=[];a&&this.lb(a)}
jd.prototype={c:function(){var a=new jd;a.gh(this.O&&this.O.c());a.bh(this.D&&this.D.c());a.Zg(this.C&&this.C.c());a.gc(this.i.map(function(a){return a.c()}));return a},z:function(){for(var a=0;a<this.i.length;a++)this.i[a].ra();this.O.ra();this.D&&this.D.z();this.C&&this.C.z();a=this.D;this.D=this.C;this.C=a},sd:function(a){if(!this.O)return a.slice();for(var b=[],c=[],d=0;d<a.length;d++)a[d].Ef(this.O,b,c,b,c);this.D&&(b=this.D.sd(b));c=this.C?this.C.sd(c):[];return b.concat(c)},Y:function(a){this.i=
a.sd(this.i);this.D&&this.D.Y(a);this.C&&this.C.Y(a)},La:function(){var a=this.i.slice();this.D&&(a=a.concat(this.D.La()));this.C&&(a=a.concat(this.C.La()));return a},lb:function(a){if(a.length){if(!this.O)this.O=a[0].O.c();for(var b=[],c=[],d=0;d<a.length;d++)a[d].Ef(this.O,this.i,this.i,b,c);if(b.length){if(!this.D)this.D=new jd;this.D.lb(b)}if(c.length){if(!this.C)this.C=new jd;this.C.lb(c)}}},gh:aa("O"),bh:aa("D"),Zg:aa("C"),xf:t("i"),gc:aa("i")};function S(){this.i=[]}function kd(a){var b=new S;b.gc(a);return b}
S.prototype={c:function(){var a=new S;a.gc(this.i.map(function(a){return a.c()}));return a},ph:t("i"),Tc:function(a){var b=new jd(this.c().i),a=new jd(a.c().i);b.Y(a);a.Y(b);a.z();a.Y(b);a.z();b.lb(a.La());return kd(b.La())},ma:function(a){var b=new jd(this.c().i),a=new jd(a.c().i);b.z();b.Y(a);a.Y(b);a.z();a.Y(b);a.z();b.lb(a.La());b.z();return kd(b.La())},Ec:function(a){var b=new jd(this.c().i),a=new jd(a.c().i);b.z();a.Y(b);a.z();b.Y(a);a.Y(b);b.lb(a.La());b.z();return kd(b.La())},inverse:function(){var a=
this.c();a.i.map(function(a){a.ra()});return a},xf:t("i"),gc:aa("i")};A("CSG",S);A("CSG.fromPolygons",kd);A("CSG.prototype.toPolygons",S.prototype.ph);A("CSG.prototype.union",S.prototype.Tc);A("CSG.prototype.subtract",S.prototype.ma);A("CSG.prototype.intersect",S.prototype.Ec);A("CSG.prototype.inverse",S.prototype.inverse);A("CSG.prototype.polygons",S.prototype.xf);A("CSG.prototype.setPolygons",S.prototype.gc);function T(a,b){this.x=ea(a)?a:0;this.y=ea(b)?b:0}T.prototype.c=function(){return new T(this.x,this.y)};T.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function ld(a,b){return new T(a.x-b.x,a.y-b.y)};function Hc(a,b){this.x=a;this.y=b}C(Hc,T);v=Hc.prototype;v.c=function(){return new Hc(this.x,this.y)};v.Hc=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};v.scale=function(a){this.x*=a;this.y*=a;return this};v.z=function(){this.x=-this.x;this.y=-this.y;return this};v.normalize=function(){return this.scale(1/this.Hc())};v.add=function(a){this.x+=a.x;this.y+=a.y;return this};v.ma=function(a){this.x-=a.x;this.y-=a.y;return this};
v.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};v.Pb=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function md(a,b){this.width=a;this.height=b}function nd(a,b){return a==b?p:!a||!b?r:a.width==b.width&&a.height==b.height}v=md.prototype;v.c=function(){return new md(this.width,this.height)};v.toString=function(){return"("+this.width+" x "+this.height+")"};v.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};v.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
v.scale=function(a){this.width*=a;this.height*=a;return this};function od(a,b){if(a instanceof od)this.v=a.If();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=r;break a}for(var f=0;f<a[d].length;f++)if(!y(a[d][f])){c=r;break a}if(0==c)c=a[d].length}c=0!=c}c?this.v=rb(a):a instanceof md?this.v=pd(a.height,a.width):y(a)&&y(b)&&0<a&&0<b?this.v=pd(a,b):g(Error("Invalid argument(s) for Matrix contructor"))}this.o=new md(this.v[0].length,this.v.length)}
function qd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new od(b)}function rd(a,b,c){for(var d=0;d<a.M().height;d++)for(var f=0;f<a.M().width;f++)b.call(c,a.v[d][f],d,f,a)}function td(a,b){var c=new od(a.M());rd(a,function(d,f,e){c.v[f][e]=b.call(j,d,f,e,a)});return c}function pd(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var f=0;f<b;f++)c[d][f]=0}return c}v=od.prototype;
v.add=function(a){nd(this.o,a.M())||g(Error("Matrix summation is only supported on arrays of equal size"));return td(this,function(b,c,d){return b+a.v[c][d]})};v.Pb=function(a,b){if(this.o.width!=a.o.width||this.o.height!=a.o.height)return r;for(var c=b||0,d=0;d<this.o.height;d++)for(var f=0;f<this.o.width;f++)if(!(Math.abs(this.v[d][f]-a.v[d][f])<=(c||1.0E-6)))return r;return p};v.M=t("o");function ud(a,b,c){return!(0<=b&&b<a.o.height&&0<=c&&c<a.o.width)?q:a.v[b][c]}
function U(a,b,c,d){0<=b&&b<a.o.height&&0<=c&&c<a.o.width||g(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.o.height+","+a.o.width+")"));a.v[b][c]=d}v.multiply=function(a){if(a instanceof od)return this.o.width!=a.M().height&&g(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),vd(this,a);if(y(a))return wd(this,a);g(Error("A matrix can only be multiplied by a number or another matrix."))};
v.ma=function(a){nd(this.o,a.M())||g(Error("Matrix subtraction is only supported on arrays of equal size."));return td(this,function(b,c,d){return b-a.v[c][d]})};v.If=t("v");v.toString=function(){var a=0;rd(this,function(b){b=(""+b).length;b>a&&(a=b)});var b=[];lb(this.v,function(c){b.push("[ ");lb(c,function(c){c=""+c;b.push(Array(a-c.length+1).join(" ")+c+" ")});b.push("]\n")});return b.join("")};
function vd(a,b){var c=new od(a.o.height,b.M().width);rd(c,function(a,f,e){for(var h=a=0;h<this.o.width;h++)a+=ud(this,f,h)*ud(b,h,e);U(c,f,e,a)},a);return c}function wd(a,b){return td(a,function(a){return a*b})};function V(a,b){od.call(this,a,b);this._className="matrix"}C(V,od);function xd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new V(b)}v=V.prototype;v.A=function(){var a=[],b=this.M();if(0==b.height||0==b.width)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(ud(this,c,d));return a};
v.translate=function(a){this.o.width!=this.o.height&&g(Error("Can not translate non-square matrix."));var b=this.M(),c=qd(b.height);a instanceof Hc&&3==b.height?(U(c,0,2,a.x),U(c,1,2,a.y)):a instanceof N&&4==b.height?(U(c,0,3,a.x),U(c,1,3,a.y),U(c,2,3,a.b)):g(Error("Translation failed."));return new V(this.multiply(c))};
v.rotate=function(a,b){(4!=this.M().height||this.o.width!=this.o.height)&&g(Error("Only 4x4 matrices can be rotated."));(!w(b)||!(b instanceof N))&&g(Error("Invalid axis vector."));y(a)||g(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),f=Math.sin(a),e=qd(4);U(e,0,0,d+c.x*c.x*(1-d));U(e,0,1,c.x*c.y*(1-d)-c.b*f);U(e,0,2,c.x*c.b*(1-d)+c.y*f);U(e,1,0,c.y*c.x*(1-d)+c.b*f);U(e,1,1,d+c.y*c.y*(1-d));U(e,1,2,c.y*c.b*(1-d)-c.x*f);U(e,2,0,c.b*c.x*(1-d)-c.y*f);U(e,2,1,c.b*c.y*(1-d)+c.x*f);U(e,2,2,
d+c.b*c.b*(1-d));return new V(this.multiply(e))};v.cc=function(a){var b=this.M(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof N&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):g(Error("Multiplication by vector failed."));a=this.multiply(new od(c));return new N(parseFloat(ud(a,0,0)),parseFloat(ud(a,1,0)),parseFloat(ud(a,2,0)))};v.nh=function(a,b){var c=this.v[a];this.v[a]=this.v[b];this.v[b]=c};
v.mh=function(a,b){for(var c=this.M(),d=0,d=0;d<c.height;d++){var f=ud(this,d,a);f||(f=0);var e=ud(this,d,b);e||(e=0);U(this,d,a,e);U(this,d,b,f)}};A("X.matrix",V);A("X.matrix.createIdentityMatrix",xd);A("X.matrix.prototype.flatten",V.prototype.A);A("X.matrix.prototype.translate",V.prototype.translate);A("X.matrix.prototype.rotate",V.prototype.rotate);A("X.matrix.prototype.multiplyByVector",V.prototype.cc);A("X.matrix.prototype.swapRows",V.prototype.nh);A("X.matrix.prototype.swapCols",V.prototype.mh);function yd(){O.call(this);this._className="transform";this.g=xd(4);this.oa=new Float32Array(this.g.A())}C(yd,O);v=yd.prototype;v.Wg=function(a){(!y(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.g=this.g.rotate(a*Math.PI/180,new N(0,1,0));this.oa=new Float32Array(this.g.A());this.d=p};v.Xg=function(a){(!y(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.g=this.g.rotate(a*Math.PI/180,new N(1,0,0));this.oa=new Float32Array(this.g.A());this.d=p};
v.Yg=function(a){(!y(a)||-360>a||360<a)&&g(Error("Invalid angle."));this.g=this.g.rotate(a*Math.PI/180,new N(0,0,1));this.oa=new Float32Array(this.g.A());this.d=p};v.rh=function(a){y(a)||g(Error("Invalid distance."));this.g=this.g.translate(new N(a,0,0));this.oa=new Float32Array(this.g.A());this.d=p};v.sh=function(a){y(a)||g(Error("Invalid distance."));this.g=this.g.translate(new N(0,a,0));this.oa=new Float32Array(this.g.A());this.d=p};
v.th=function(a){y(a)||g(Error("Invalid distance."));this.g=this.g.translate(new N(0,0,a));this.oa=new Float32Array(this.g.A());this.d=p};v.Hg=t("g");v.Bf=function(a){var b=xd(4);w(a)&&a instanceof V&&(b=a);this.g=b;this.oa=new Float32Array(this.g.A());this.d=p};function zd(a){return a.oa}function Ad(a,b,c){var d=ud(a.g,b,c);d||(d=0);U(a.g,b,c,-1*d);a.oa=new Float32Array(a.g.A());a.d=p}v.pg=function(){Ad(this,0,0)};v.qg=function(){Ad(this,1,1)};v.rg=function(){Ad(this,2,2)};A("X.transform",yd);
A("X.transform.prototype.rotateX",yd.prototype.Wg);A("X.transform.prototype.rotateY",yd.prototype.Xg);A("X.transform.prototype.rotateZ",yd.prototype.Yg);A("X.transform.prototype.translateX",yd.prototype.rh);A("X.transform.prototype.translateY",yd.prototype.sh);A("X.transform.prototype.translateZ",yd.prototype.th);A("X.transform.prototype.matrix",yd.prototype.Hg);A("X.transform.prototype.setMatrix",yd.prototype.Bf);A("X.transform.prototype.flipX",yd.prototype.pg);A("X.transform.prototype.flipY",yd.prototype.qg);
A("X.transform.prototype.flipZ",yd.prototype.rg);function Bd(a){O.call(this);this._className="file";this.ke=a;this.d=p}C(Bd,O);Bd.prototype.path=t("ke");Bd.prototype.fh=function(a){this.ke=a;this.d=p};A("X.file",Bd);A("X.file.prototype.path",Bd.prototype.path);A("X.file.prototype.setPath",Bd.prototype.fh);function Cd(){O.call(this);this._className="texture";var a=window["X.Counter"];a.Se();this._id=a.value();this.Qa=q;this.ai=Dd;this.Jb=this.ee=q;this.sc=this.tc=0;this.d=p}C(Cd,O);var Dd="SHARP",Ed={Ph:Dd,Qh:"SMOOTH"};Cd.prototype.id=t("_id");Cd.prototype.file=t("Qa");Cd.prototype.Cd=t("ee");A("X.texture",Cd);A("X.texture.filters",Ed);A("X.texture.prototype.file",Cd.prototype.file);function L(a){O.call(this);this._className="object";var b=window["X.Counter"];b.Se();this._id=b.value();this._type=Fd;this.te=new yd;this._color=[1,1,1];this.j=new P;this.m=new P;this.W=new P;this.Qa=this.Ta=this.T=q;this._opacity=1;this.cb=q;this._visible=p;this._lineWidth=this._pointSize=1;this._caption=q;this._magicMode=r;if(w(a)){this._type=a.type();this.te.Bf(new V(a.transform().g));this._color=Array(a.color());this.j=new P(a.j);this.m=new P(a.m);this.W=new P(a.W);this.T=a.T;this.Ta=a.Ta;if(a.file())this.Qa=
new Bd((new String(a.file().path())).toString());this._opacity=a.opacity();this.cb=a.children();this._visible=a.Zd();this._pointSize=a.Pd();this._lineWidth=a.lineWidth();a.caption()&&(this._caption=(new String(a.caption())).toString());this._magicMode=a.Gd();this.d=p}this.d=p}C(L,O);var Fd="TRIANGLES",$c="LINES";v=L.prototype;v.id=t("_id");
function Gd(a){for(var b=a.j.Z(),c=[],d=0,d=0;d<b;d+=3){var f=a.j.get(d),e=a.j.get(d+1),h=a.j.get(d+2),i=a.m.get(d),k=a.m.get(d+1),o=a.m.get(d+2),l=a._color;0<a.W.length()&&(l=a.W.get(d));var n=[];n.push(new R(f,i));n.push(new R(e,k));n.push(new R(h,o));c.push(new id(n,l))}return kd(c)}
function Hd(a,b){(!w(b)||!(b instanceof S))&&g(Error("Invalid CSG object."));a.j.clear();a.m.clear();a.W.clear();var c=new gd,d=[];mb(b.i,function(a){for(var b=[],h=a.hc,b=mb(a.na,function(a){a.color=h;return c.add(a)}),a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.Sf=mb(c.unique(),function(a){return[a.J.x(),a.J.y(),a.J.b()]});a.Rf=mb(c.unique(),function(a){return[a.w.x(),a.w.y(),a.w.b()]});a.Qf=mb(c.unique(),function(a){return!a.color?q:[a.color[0],a.color[1],a.color[2]]});mb(d,function(a){var b=
a[0],c=a[1],a=a[2],d=this.Sf,k=this.Rf,o=this.Qf;this.j.add(d[b][0],d[b][1],d[b][2]);this.j.add(d[c][0],d[c][1],d[c][2]);this.j.add(d[a][0],d[a][1],d[a][2]);this.m.add(k[b][0],k[b][1],k[b][2]);this.m.add(k[c][0],k[c][1],k[c][2]);this.m.add(k[a][0],k[a][1],k[a][2]);o[b]&&this.W.add(o[b][0],o[b][1],o[b][2]);o[c]&&this.W.add(o[c][0],o[c][1],o[c][2]);o[a]&&this.W.add(o[a][0],o[a][1],o[a][2])}.bind(a));a.ub(Fd)}v.type=t("_type");v.ub=aa("_type");v.transform=t("te");v.Rg=t("j");v.Lg=t("m");v.gg=t("W");
v.color=t("_color");v.oh=t("T");v.Rc=function(a){if(w(a)){if(x(a)){var b=a,c=a=new Cd;w(b)?(x(b)&&(b=new Bd(b)),c.Qa=b):c.Qa=q}a instanceof Cd||g(Error("Invalid texture."));this.T=a}else this.T=q};v.Af=function(a,b,c){(!y(a)&&0>a&&1<a||!y(b)&&0>b&&1<b||!y(c)&&0>c&&1<c)&&g(Error("Invalid color."));if(this.Xb())for(var d=this.children(),f=d.length,e=0,e=0;e<f;e++)d[e].Af(a,b,c);this._color[0]=a;this._color[1]=b;this._color[2]=c;this.d=p};
v.Tc=function(a){(!w(a)||!(a instanceof S)&&!(a instanceof L))&&g(Error("Invalid object."));var b=a;a instanceof L&&(b=Gd(b));a=new L;Hd(a,Gd(this).Tc(b));return a};v.ma=function(a){(!w(a)||!(a instanceof S)&&!(a instanceof L))&&g(Error("Invalid object."));var b=a;a instanceof L&&(b=Gd(b));a=new L;Hd(a,Gd(this).ma(b));return a};v.Ec=function(a){(!w(a)||!(a instanceof S)&&!(a instanceof L))&&g(Error("Invalid object."));var b=a;a instanceof L&&(b=Gd(b));a=new L;Hd(a,Gd(this).Ec(b));return a};
v.inverse=function(a){(!w(a)||!(a instanceof S)&&!(a instanceof L))&&g(Error("Invalid object."));var b=a;a instanceof L&&(b=Gd(b));a=new L;Hd(a,Gd(this).inverse(b));return a};v.opacity=t("_opacity");v.caption=t("_caption");v.$g=function(a){this._caption=a;this.d=p};v.K=function(a){if(this.Xb())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].K(a);this._visible=a;this.d=p};v.Zd=t("_visible");
v.Cf=function(a){(!y(a)||1<a||0>a)&&g(Error("Invalid opacity."));if(this.Xb())for(var b=this.children(),c=b.length,d=0,d=0;d<c;d++)b[d].Cf(a);this._opacity=a;this.d=p};v.load=function(a){this.Qa=w(a)?new Bd(a):q};v.file=t("Qa");v.bc=function(){var a=new Oc;a.Ha=this;this.dispatchEvent(a)};v.children=function(){if(!this.cb)this.cb=[];return this.cb};v.Xb=function(){return!this.cb?r:0<this.cb.length};v.dh=function(a){y(a)||g(Error("Invalid line width."));this._lineWidth=a;this.d=p};v.lineWidth=t("_lineWidth");
v.hh=function(a){y(a)||g(Error("Invalid point size."));this._pointSize=a;this.d=p};v.Pd=t("_pointSize");v.Gd=t("_magicMode");v.eh=function(a){"boolean"!=typeof a&&g(Error("Invalid magicMode setting."));this._magicMode=a};function Id(a,b){(!w(a)||!w(b)||!(a instanceof L)||!(b instanceof L))&&g(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.opacity()?-1:1==b.opacity()?1:w(a.zc)&&w(b.zc)&&a.zc>b.zc?-1:1}A("X.object",L);A("X.object.prototype.id",L.prototype.id);
A("X.object.prototype.type",L.prototype.type);A("X.object.prototype.transform",L.prototype.transform);A("X.object.prototype.points",L.prototype.Rg);A("X.object.prototype.normals",L.prototype.Lg);A("X.object.prototype.texture",L.prototype.oh);A("X.object.prototype.setTexture",L.prototype.Rc);A("X.object.prototype.colors",L.prototype.gg);A("X.object.prototype.color",L.prototype.color);A("X.object.prototype.setColor",L.prototype.Af);A("X.object.prototype.opacity",L.prototype.opacity);
A("X.object.prototype.setOpacity",L.prototype.Cf);A("X.object.prototype.lineWidth",L.prototype.lineWidth);A("X.object.prototype.setLineWidth",L.prototype.dh);A("X.object.prototype.pointSize",L.prototype.Pd);A("X.object.prototype.setPointSize",L.prototype.hh);A("X.object.prototype.load",L.prototype.load);A("X.object.prototype.file",L.prototype.file);A("X.object.prototype.caption",L.prototype.caption);A("X.object.prototype.visible",L.prototype.Zd);A("X.object.prototype.setCaption",L.prototype.$g);
A("X.object.prototype.setVisible",L.prototype.K);A("X.object.prototype.magicMode",L.prototype.Gd);A("X.object.prototype.setMagicMode",L.prototype.eh);A("X.object.prototype.intersect",L.prototype.Ec);A("X.object.prototype.inverse",L.prototype.inverse);A("X.object.prototype.subtract",L.prototype.ma);A("X.object.prototype.union",L.prototype.Tc);A("X.object.OPACITY_COMPARATOR",Id);A("X.object.prototype.children",L.prototype.children);function Jd(){Uc.call(this);this._className="parserVTK"}C(Jd,Uc);
Jd.prototype.parse=function(a,b){var c=a.j,d=a.m,f=b.split("\n"),e=f.length,h=new P,i=new P;this.F=[];this.X=Fd;this.kd=this.Ja=this.Aa=this.Ka=r;for(var k=0,o=e%8;o--;)this.r(h,i,f[k]),k++;for(o=0.125*e^0;o--;)this.r(h,i,f[k]),k++,this.r(h,i,f[k]),k++,this.r(h,i,f[k]),k++,this.r(h,i,f[k]),k++,this.r(h,i,f[k]),k++,this.r(h,i,f[k]),k++,this.r(h,i,f[k]),k++,this.r(h,i,f[k]),k++;if(this.X==Fd){f=i.length();k=e=this.F.length;do{var o=this.F[e-k],l=o.length,n;for(n=0;n<l;n++){var m=parseInt(o[n],10),s=
h.get(m);c.add(s[0],s[1],s[2]);m<f?(m=i.get(m),d.add(m[0],m[1],m[2])):(m=new N(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b))}k--}while(0<k)}else if("TRIANGLE_STRIPS"==this.X){f=i.length();k=e=this.F.length;do{o=this.F[e-k];l=o.length;for(n=0;n<l;n++)m=parseInt(o[n],10),s=h.get(m),c.add(s[0],s[1],s[2]),(0==n||n==l-1)&&c.add(s[0],s[1],s[2]),m<f?(m=i.get(m),d.add(m[0],m[1],m[2]),(0==n||n==l-1)&&d.add(m[0],m[1],m[2])):(m=new N(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b),(0==n||n==l-1)&&d.add(m.x,
m.y,m.b));k--}while(0<k)}else if(this.X==$c){f=i.length();k=e=this.F.length;do{o=this.F[e-k];l=o.length;for(n=0;n<l-1;n++){var u=parseInt(o[n],10),m=parseInt(o[n+1],10),z=h.get(u),s=h.get(m);c.add(z[0],z[1],z[2]);c.add(s[0],s[1],s[2]);u<f-1?(s=i.get(u),m=i.get(m),d.add(s[0],s[1],s[2]),d.add(m[0],m[1],m[2])):(m=new N(z[0],z[1],z[2]),m.normalize(),d.add(m.x,m.y,m.b),m=new N(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b))}k--}while(0<k)}else if("POINTS"==this.X){f=i.length();k=e=this.F.length;do{o=
this.F[e-k];l=o.length;for(n=0;n<l;n++)m=parseInt(o[n],10),s=h.get(m),c.add(s[0],s[1],s[2]),m<f?(m=i.get(m),d.add(m[0],m[1],m[2])):(m=new N(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b));k--}while(0<k)}else if("POLYGONS"==this.X){f=i.length();k=e=this.F.length;do{o=this.F[e-k];l=o.length;for(n=0;n<l;n++)m=parseInt(o[n],10),s=h.get(m),c.add(s[0],s[1],s[2]),m<f?(m=i.get(m),d.add(m[0],m[1],m[2])):(m=new N(s[0],s[1],s[2]),m.normalize(),d.add(m.x,m.y,m.b));k--}while(0<k)}a.ub(this.X);c=new Oc;c.Ha=
a;this.dispatchEvent(c)};
Jd.prototype.r=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),c=c.split(" "),d=c.length,f=c[0];if("POINTS"==f)this.Ka=p,this.Ja=this.Aa=r;else if("VERTICES"==f)this.Aa=p,this.Ja=this.Ka=r,a=parseInt(c[1],10),3<=a?this.X=Fd:1==a?this.X="POINTS":g(Error("VTK file not supported!")),this.F=[];else if("TRIANGLE_STRIPS"==f)this.Aa=p,this.Ja=this.Ka=r,this.X="TRIANGLE_STRIPS",this.F=[];else if("LINES"==f)this.Aa=p,this.Ja=this.Ka=r,this.X=$c,this.F=[];else if("POLYGONS"==f)this.Aa=p,this.Ja=this.Ka=r,
this.X="POLYGONS",this.F=[];else if("POINT_DATA"==f)this.Ja=p,this.Aa=this.Ka=r;else if(this.Ka)if(1==d||isNaN(parseFloat(f)))this.Ka=r;else{if(3<=d){var f=parseFloat(c[0]),e=parseFloat(c[1]),h=parseFloat(c[2]);a.add(f,e,h)}6<=d&&(f=parseFloat(c[3]),e=parseFloat(c[4]),h=parseFloat(c[5]),a.add(f,e,h));9<=d&&(d=parseFloat(c[6]),f=parseFloat(c[7]),c=parseFloat(c[8]),a.add(d,f,c))}else if(this.Aa)1==d||isNaN(parseFloat(f))?this.Aa=r:this.F.push(c.slice(1));else if(this.Ja)"NORMALS"==f?this.kd=p:1==d||
isNaN(parseFloat(f))?this.kd=this.Ja=r:this.kd&&(3<=d&&(f=parseFloat(c[0]),e=parseFloat(c[1]),h=parseFloat(c[2]),b.add(f,e,h)),6<=d&&(f=parseFloat(c[3]),e=parseFloat(c[4]),h=parseFloat(c[5]),b.add(f,e,h)),9<=d&&(d=parseFloat(c[6]),f=parseFloat(c[7]),c=parseFloat(c[8]),b.add(d,f,c)))};A("X.parserVTK",Jd);A("X.parserVTK.prototype.parse",Jd.prototype.parse);A("X.parserVTK.prototype.parseLine",Jd.prototype.r);function Kd(){Uc.call(this);this._className="parserFSM"}C(Kd,Uc);
Kd.prototype.parse=function(a,b){var c=a.j,d=a.m,f=new P,e;e=3;var h=0,i;do i=this.s(b,e++),h++;while(200>h&&10!=i);e++;var k=Yc(this,b,e);e+=4;h=Yc(this,b,e);e+=4;i=[];for(var o=0,o=0;o<k;o++){var l=Vc(this,b,e);e+=4;var n=Vc(this,b,e);e+=4;var m=Vc(this,b,e);e+=4;i[o]=0;f.add(l,n,m)}k=[];o=[];for(l=0;l<h;l++){var s=Yc(this,b,e);e+=4;m=Yc(this,b,e);e+=4;n=Yc(this,b,e);e+=4;i[s]+=1;i[m]+=1;i[n]+=1;k.push([s,m,n]);o.push(new N(0,0,0))}for(l=0;l<h;l++){var s=k[l][0],m=k[l][1],n=k[l][2],u=f.get(s);e=
f.get(m);var z=f.get(n),u=new N(u[0],u[1],u[2]),z=new N(z[0],z[1],z[2]);e=(new N(e[0],e[1],e[2])).c().ma(u);u=z.c().ma(u);e=Sc(e,u).normalize();o[s]=o[s].add(e);o[m]=o[m].add(e);o[n]=o[n].add(e)}for(l=0;l<h;l++)s=k[l][0],m=k[l][1],n=k[l][2],u=f.get(s),e=f.get(m),z=f.get(n),c.add(u[0],u[1],u[2]),c.add(e[0],e[1],e[2]),c.add(z[0],z[1],z[2]),s=o[s].scale(1/i[s]).normalize(),m=o[m].scale(1/i[m]).normalize(),n=o[n].scale(1/i[n]).normalize(),d.add(s.x,s.y,s.b),d.add(m.x,m.y,m.b),d.add(n.x,n.y,n.b);a.ub(Fd);
c=new Oc;c.Ha=a;this.dispatchEvent(c)};A("X.parserFSM",Kd);A("X.parserFSM.prototype.parse",Kd.prototype.parse);function Ld(a){function b(){fc+=8;return Ae<sd.length?sd.charCodeAt(Ae++)&255:-1}function c(){var a;fc++;a=Da&1;Da>>=1;0==Da&&(Da=b(),a=Da&1,Da=Da>>1|128);return a}function d(a){for(var b=0,d=a;d--;)b=b<<1|c();a&&(b=ga[b]>>8-a);return b}function f(a){ja++;Y[M++]=a;s.push(String.fromCharCode(a));32768==M&&(M=0)}function e(){this.Na=this.Ma=0;this.Fc=q;this.We=-1}function h(){for(;;){if(Cb[la]>=Be)return-1;if(Ce[Cb[la]]==la)return Cb[la]++;Cb[la]++}}function i(){var a=Db[Eb],b;u&&document.write("<br>len:"+
la+" treepos:"+Eb);if(17==la)return-1;Eb++;la++;b=h();u&&document.write("<br>IsPat "+b);if(0<=b)a.Ma=b,u&&document.write("<br>b0 "+a.Ma);else if(a.Ma=32768,u&&document.write("<br>b0 "+a.Ma),i())return-1;b=h();if(0<=b)a.Na=b,u&&document.write("<br>b1 "+a.Na),a.Fc=q;else if(a.Na=32768,u&&document.write("<br>b1 "+a.Na),a.Fc=Db[Eb],a.We=Eb,i())return-1;la--;return 0}function k(a,b,c){u&&document.write("currentTree "+a+" numval "+b+" lengths "+c+" show 0");Db=a;Eb=0;Ce=c;Be=b;for(a=0;17>a;a++)Cb[a]=0;
la=0;if(i())return u&&window.console.log("invalid huffman tree\n"),-1;if(u){document.write("<br>Tree: "+Db.length);for(a=0;32>a;a++)document.write("Places["+a+"].b0="+Db[a].Ma+"<br>"),document.write("Places["+a+"].b1="+Db[a].Na+"<br>")}return 0}function o(a){for(var b,d,e=0,f=a[e];;)if(b=c(),u&&document.write("b="+b),b){if(!(f.Na&32768))return u&&document.write("ret1"),f.Na;f=f.Fc;b=a.length;for(d=0;d<b;d++)if(a[d]===f){e=d;break}}else{if(!(f.Ma&32768))return u&&document.write("ret2"),f.Ma;e++;f=
a[e]}}function l(){var a,h,i,n;do{a=c();h=d(2);switch(h){case 0:u&&window.console.log("Stored\n");break;case 1:u&&window.console.log("Fixed Huffman codes\n");break;case 2:u&&window.console.log("Dynamic Huffman codes\n");break;case 3:u&&window.console.log("Reserved block type!!\n");break;default:u&&window.console.log("Unexpected value %d!\n",h)}if(0==h){var m;Da=1;m=b();m|=b()<<8;h=b();h|=b()<<8;for((m^~h)&65535&&document.write("BlockLen checksum mismatch\n");m--;)h=b(),f(h)}else if(1==h)for(var l;;)if(l=
ga[d(7)]>>1,23<l?(l=l<<1|c(),199<l?(l-=128,l=l<<1|c()):(l-=48,143<l&&(l+=136))):l+=256,256>l)f(l);else if(256==l)break;else{l-=257;n=d(cc[l])+ka[l];l=ga[d(5)]>>3;8<Fb[l]?(m=d(8),m|=d(Fb[l]-8)<<8):m=d(Fb[l]);m+=De[l];for(l=0;l<n;l++)h=Y[M-m&32767],f(h)}else if(2==h){var s=Array(320);h=257+d(5);m=1+d(5);i=4+d(4);for(l=0;19>l;l++)s[l]=0;for(l=0;l<i;l++)s[Qf[l]]=d(3);n=pa.length;for(i=0;i<n;i++)pa[i]=new e;if(k(pa,19,s)){M=0;return}if(u){document.write("<br>distanceTree");for(l=0;l<pa.length;l++)document.write("<br>"+
pa[l].Ma+" "+pa[l].Na+" "+pa[l].Fc+" "+pa[l].We)}n=h+m;i=0;var z=-1;for(u&&document.write("<br>n="+n+" bits: "+fc+"<br>");i<n;)if(z++,l=o(pa),u&&document.write("<br>"+z+" i:"+i+" decode: "+l+"    bits "+fc+"<br>"),16>l)s[i++]=l;else if(16==l){var B;l=3+d(2);if(i+l>n){M=0;return}for(B=i?s[i-1]:0;l--;)s[i++]=B}else{l=17==l?3+d(3):11+d(7);if(i+l>n){M=0;return}for(;l--;)s[i++]=0}n=gc.length;for(i=0;i<n;i++)gc[i]=new e;if(k(gc,h,s)){M=0;return}n=gc.length;for(i=0;i<n;i++)pa[i]=new e;l=[];n=s.length;for(i=
h;i<n;i++)l[i-h]=s[i];if(k(pa,m,l)){M=0;return}for(u&&document.write("<br>literalTree");;)if(l=o(gc),256<=l){l-=256;if(0==l)break;l--;n=d(cc[l])+ka[l];l=o(pa);8<Fb[l]?(m=d(8),m|=d(Fb[l]-8)<<8):m=d(Fb[l]);for(m+=De[l];n--;)h=Y[M-m&32767],f(h)}else f(l)}}while(!a);M=0;Da=1}function n(){u&&window.console.log("NEXTFILE");s=[];var a=[];J=r;a[0]=b();a[1]=b();u&&window.console.log("type: "+a[0]+" "+a[1]);120==a[0]&&218==a[1]&&(u&&window.console.log("GEONExT-GZIP"),l(),u&&window.console.log(s.join("")),F[B]=
Array(2),F[B][0]=s.join(""),F[B][1]="geonext.gxt",B++);31==a[0]&&139==a[1]&&(u&&window.console.log("GZIP"),m(),u&&window.console.log(s.join("")),F[B]=Array(2),F[B][0]=s.join(""),F[B][1]="file",B++);if(80==a[0]&&75==a[1]&&(J=p,a[2]=b(),a[3]=b(),3==a[2]&&4==a[3])){a[0]=b();a[1]=b();u&&window.console.log("ZIP-Version: "+a[1]+" "+a[0]/10+"."+a[0]%10);z=b();z|=b()<<8;u&&window.console.log("gpflags: "+z);a=b();a|=b()<<8;u&&window.console.log("method: "+a);b();b();b();b();var c=b(),c=c|b()<<8,c=c|b()<<16,
c=c|b()<<24,d=b(),d=d|b()<<8,d=d|b()<<16,d=d|b()<<24,f=b(),f=f|b()<<8,f=f|b()<<16,f=f|b()<<24;u&&window.console.log("local CRC: "+c+"\nlocal Size: "+f+"\nlocal CompSize: "+d);c=b();c|=b()<<8;d=b();d|=b()<<8;u&&window.console.log("filelen "+c);f=0;for(Ua=[];c--;){var e=b();"/"==e|":"==e?f=0:f<Ee-1&&(Ua[f++]=String.fromCharCode(e))}u&&window.console.log("nameBuf: "+Ua);Fe||(Fe=Ua);for(f=0;f<d;)b(),f++;ja=0;8==a&&(l(),u&&window.console.log(s.join("")),F[B]=Array(2),F[B][0]=s.join(""),F[B][1]=Ua.join(""),
B++);m()}}function m(){var a=[],c;z&8&&(a[0]=b(),a[1]=b(),a[2]=b(),a[3]=b(),80==a[0]&&75==a[1]&&7==a[2]&&8==a[3]&&(b(),b(),b(),b()),b(),b(),b(),b(),b(),b(),b(),b(),u&&window.console.log("CRC:"));J&&n();a[0]=b();if(8!=a[0])u&&window.console.log("Unknown compression method!");else{z=b();u&&z&-32&&window.console.log("Unknown flags set!");b();b();b();b();b();b();if(z&4){a[0]=b();a[2]=b();la=a[0]+256*a[1];u&&window.console.log("Extra field size: "+la);for(a=0;a<la;a++)b()}if(z&8){a=0;for(Ua=[];c=b();){if("7"==
c||":"==c)a=0;a<Ee-1&&(Ua[a++]=c)}u&&window.console.log("original file name: "+Ua)}if(z&16)for(;b(););z&2&&(b(),b());l();b();b();b();b();b();b();b();b();J&&n()}}var s=[],u=r,z,B=0,F=[],Y=Array(32768),M=0,J=r,ja,ga=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,
138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,
123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],ka=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cc=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],De=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Fb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Qf=[16,17,18,0,8,7,9,6,
10,5,11,4,12,3,13,2,14,1,15],sd=a,Ae=0,Da=1,fc=0,Ee=256,Ua=[],Fe,gc=Array(288),pa=Array(32),Eb=0,Db=q,la=0,Cb=Array(17);Cb[0]=0;var Ce,Be;Ld.prototype.uh=function(){u&&window.console.log(sd);n();return F}};function Md(){Uc.call(this);this._className="parserNRRD"}C(Md,Uc);
Md.prototype.parse=function(a,b){var c=0,d=b.match(/^([\s\S]*?)\r?\n\r?\n/),c=d[0].length,f,e,h,i,k,o,d=d[1].split(/\r?\n/);for(k=0,o=d.length;k<o;k++)if(f=d[k],f.match(/NRRD\d+/))this.Cg=p;else if(!f.match(/^#/)&&(i=f.match(/(.*):(.*)/)))e=i[1].trim(),f=i[2].trim(),(h=this.og[e])?h.call(this,f):this[e]=f;this.Cg||g(Error("Not an NRRD file"));"raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding&&g(Error("Only raw or gz/gzip encoding is allowed"));if(!this.Yd&&(this.Yd=[new N(1,0,0),
new N(0,1,0),new N(0,0,1)],this.Ud)){d=[];for(i=0;2>=i;i++)d.push(!isNaN(this.Ud[i])?this.Yd[i].scale(this.Ud[i]):j)}i=0;i="gzip"==this.encoding||"gz"==this.encoding?(new Ld(b.substr(c))).uh()[0][0]:b.substr(c);a.fa=[this.bb[2],this.bb[1],this.bb[0]];a.qa();k=this.bb[0]*this.bb[1]*this.bb[2];c=Array(k);d=-Infinity;o=Infinity;for(f=0;f<k;f++)e=this.Lc(i,0+f*this.Kc),c[f]=e,d=Math.max(d,e),o=Math.min(o,e);k=this.bb;f=d;i=k[2];d=k[1];k=k[0];e=d*k;o=Array(i);for(h=0;h<i;h++){o[h]=Array(d);for(var l=0;l<
d;l++)o[h][l]=new Uint8Array(k)}for(l=l=0;l<i;l++){h=c.slice(l*e,(l+1)*e);for(var n=new Uint8Array(4*e),m=0,s=0,u=0,m=0;m<d;m++)for(s=0;s<k;s++){var z=h[u],z=255*(z/f),B=4*u;n[B]=z;n[++B]=z;n[++B]=z;n[++B]=255;o[l][m][s]=z;u++}m=h=new Cd;m.Jb=n;m.d=p;n=h;n.tc=k;n.d=p;n=h;n.sc=d;n.d=p;a.pe.children()[l].Rc(h)}for(m=0;m<d;m++){n=new Uint8Array(4*i*k);for(l=u=0;l<i;l++)for(s=0;s<k;s++)z=o[l][m][s],B=4*u,n[B]=z,n[++B]=z,n[++B]=z,n[++B]=255,u++;c=h=new Cd;c.Jb=n;c.d=p;c=h;c.tc=k;c.d=p;c=h;c.sc=i;c.d=p;
a.qe.children()[d-1-m].Rc(h)}for(s=0;s<k;s++){n=new Uint8Array(4*i*d);for(l=u=0;l<i;l++)for(m=0;m<d;m++)z=o[l][m][s],B=4*u,n[B]=z,n[++B]=z,n[++B]=z,n[++B]=255,u++;c=h=new Cd;c.Jb=n;c.d=p;c=h;c.tc=d;c.d=p;c=h;c.sc=i;c.d=p;a.re.children()[k-1-s].Rc(h)}c=new Oc;c.Ha=a;this.dispatchEvent(c)};
Md.prototype.og={type:function(a){switch(a){case "unsigned char":case "uint8":this.Lc=this.s;this.Kc=1;break;case "signed char":case "int8":this.Lc=this.Og;this.Kc=1;break;case "short":case "signed short":case "unsigned short":case "short int":case "int16":this.Lc=this.Mc;this.Kc=2;break;case "int":case "int32":break;case "float":this.Lc=this.ec;this.Kc=4;break;default:g(Error("Only short/int/int8/float data is allowed. Found "+a))}return this.type=a},endian:function(a){return this.gi=a},encoding:function(a){return this.encoding=
a},dimension:function(a){return this.fi=parseInt(a,10)},sizes:function(a){var b,c,d,f;d=a.split(/\s+/);f=[];for(b=0,c=d.length;b<c;b++)a=d[b],f.push(parseInt(a,10));return this.bb=f},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.Yd=function(){var a,e,h;h=[];for(a=0,e=c.length;a<e;a++)d=c[a],h.push(function(){var a,c,f,e;f=d.slice(1,-1).split(/,/);e=[];for(a=0,c=f.length;a<c;a++)b=f[a],e.push(parseFloat(b));return e}());return h}()},spacings:function(a){var b;b=a.split(/\s+/);
var c,d,f;f=[];for(c=0,d=b.length;c<d;c++)a=b[c],f.push(parseFloat(a));return this.Ud=f}};A("X.parserNRRD",Md);A("X.parserNRRD.prototype.parse",Md.prototype.parse);function Nd(){O.call(this);this._className="loader";this.Ab=q;this.Ib=0}C(Nd,O);function Od(a){if(!w(a.Ab))a.Ab=new H;return a.Ab}function Pd(a){return!w(a.Ab)?p:!a.Ab.td(r)}Nd.prototype.Gg=function(a){Qd(this,1.7);setTimeout(function(){a.T.file().va();a.bc();Od(this).set(a.id(),p)}.bind(this),100)};function Qd(a,b){a.Ib+=b/Od(a).ia()/3;if(1<a.Ib)a.Ib=1;var c=new Pc;c.ue=a.Ib;a.dispatchEvent(c)}Nd.prototype.Ze=function(){g(Error("Could not get the file."))};
Nd.prototype.Fg=function(a,b){Qd(this,1);setTimeout(function(){var c=b.file().path().split(".").pop().toLowerCase();"stl"==c?(c=new ad,mc(c,sc,this.dc.bind(this)),c.parse(b,a.response)):"vtk"==c?(c=new Jd,mc(c,sc,this.dc.bind(this)),c.parse(b,a.response)):"trk"==c?(c=new Zc,mc(c,sc,this.dc.bind(this)),c.parse(b,a.response)):"fsm"==c?(c=new Kd,mc(c,sc,this.dc.bind(this)),c.parse(b,a.response)):"nrrd"==c&&(c=new Md,mc(c,sc,this.dc.bind(this)),c.parse(b,a.response))}.bind(this),100)};
Nd.prototype.dc=function(a){Qd(this,1);setTimeout(function(){var b=a.Ha;b.file().va();b.bc();Od(this).set(b.id(),p)}.bind(this),100)};A("X.loader",Nd);function Rd(){O.call(this);this._className="shader";this.Mb="";this.Mb="precision mediump float;\n\nattribute vec3 vertexPosition;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\nattribute vec2 vertexTexturePos;\n\nuniform mat4 view;\nuniform mat4 perspective;\nuniform vec3 center;\nuniform mat4 objectTransform;\nuniform bool useObjectColor;\nuniform vec3 objectColor;\nuniform float pointSize;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * vertexNormal;\n  vec3 vertexPosition2 = vertexPosition - center;\n  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n  fragmentTexturePos = vertexTexturePos;\n  if (useObjectColor) {\n    fragmentColor = objectColor;\n  } else {\n    fragmentColor = vertexColor;\n  }\n  gl_PointSize = pointSize;\n  gl_Position = perspective * fVertexPosition;\n}\n";
this.zb="";this.zb="precision mediump float;\n\nuniform bool usePicking;\nuniform bool useTexture;\nuniform sampler2D textureSampler;\nuniform float objectOpacity;\n\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n if (usePicking) {\n   gl_FragColor = vec4(fragmentColor, 1.0);\n } else if (useTexture) {\n   gl_FragColor = texture2D(textureSampler,   vec2(fragmentTexturePos.s,fragmentTexturePos.t));\n } else {\n   vec3 nNormal = normalize(fTransformedVertexNormal);\n   vec3 light = vec3(0.0, 0.0, 1.0);\n   vec3 lightDirection = vec3(0,0,-10);\n   lightDirection = normalize(lightDirection);\n   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n   float ambient = 0.3;\n   gl_FragColor = vec4(fragmentColor * ambient +\n                       fragmentColor * diffuse +\n                       vec3(0.2, 0.2, 0.2) * specular,\n                       objectOpacity);\n }\n}\n"}
C(Rd,O);var Sd={Xh:"vertexPosition",Wh:"vertexNormal",Vh:"vertexColor",Yh:"vertexTexturePos"},Td={Zh:"view",Jh:"perspective",Ah:"center",Hh:"objectTransform",Sh:"useObjectColor",Fh:"objectColor",Kh:"pointSize",Gh:"objectOpacity",Eh:"normal",Th:"usePicking",Uh:"useTexture",Rh:"textureSampler"};Rd.prototype.wh=t("Mb");Rd.prototype.sg=t("zb");
Rd.prototype.Nf=function(){var a=Object.keys(Td);Object.keys(Sd).every(function(a){a=eval("X.shaders.attributes."+a);return-1!=this.Mb.search(a)||-1!=this.zb.search(a)}.bind(this))||g(Error("Could not find all attributes in the shader sources."));a.every(function(a){a=eval("X.shaders.uniforms."+a);return-1!=this.Mb.search(a)||-1!=this.zb.search(a)}.bind(this))||g(Error("Could not find all uniforms in the shader sources."));return p};A("X.shaders",Rd);A("X.shaders.attributes",Sd);
A("X.shaders.uniforms",Td);A("X.shaders.prototype.vertex",Rd.prototype.wh);A("X.shaders.prototype.fragment",Rd.prototype.sg);A("X.shaders.prototype.validate",Rd.prototype.Nf);function Ud(a){this.ca=a;this.k=[]}C(Ud,Mb);var Vd=[];function Wd(a,b,c,d,f){fa(c)||(Vd[0]=c,c=Vd);for(var e=0;e<c.length;e++)a.k.push(I(b,c[e],d||a,f||r,a.ca||a))}Ud.prototype.Nc=function(){lb(this.k,oc);this.k.length=0};Ud.prototype.t=function(){Ud.B.t.call(this);this.Nc()};Ud.prototype.handleEvent=function(){g(Error("EventHandler.handleEvent not implemented"))};function Xd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Xd.prototype.c=function(){return new Xd(this.top,this.right,this.bottom,this.left)};Xd.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};Xd.prototype.contains=function(a){return!this||!a?r:a instanceof Xd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Yd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}v=Yd.prototype;v.c=function(){return new Yd(this.left,this.top,this.width,this.height)};v.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};
v.Ue=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,p}return r};v.contains=function(a){return a instanceof Yd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
v.M=function(){return new md(this.width,this.height)};var Zd;function $d(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=sb(arguments,1),f;f=c;for(var e=0,h=0;h<d.length;h++)0<=kb(f,d[h])||(f.push(d[h]),e++);f=e==d.length;a.className=c.join(" ");return f};var ae=!D||db(9);!Pa&&!D||D&&db(9)||Pa&&G("1.9.1");D&&G("9");function be(a){return a?new ce(de(a)):Zd||(Zd=new ce)}function ee(a){return x(a)?document.getElementById(a):a}function fe(a,b){eb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in ge?a.setAttribute(ge[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var ge={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function he(a,b,c){return ie(document,arguments)}
function ie(a,b){var c=b[0],d=b[1];if(!ae&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',wa(d.name),'"');if(d.type){c.push(' type="',wa(d.type),'"');var f={};ib(f,d);d=f;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)x(d)?c.className=d:fa(d)?$d.apply(q,[c].concat(d)):fe(c,d);2<b.length&&je(a,c,b);return c}
function je(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var f=2;f<c.length;f++){var e=c[f];ha(e)&&!(ma(e)&&0<e.nodeType)?lb(ke(e)?rb(e):e,d):d(e)}}function le(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function me(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function ne(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function de(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function ke(a){if(a&&"number"==typeof a.length){if(ma(a))return"function"==typeof a.item||"string"==typeof a.item;if(ia(a))return"function"==typeof a.item}return r}function ce(a){this.u=a||ba.document||document}v=ce.prototype;
v.Tb=be;v.e=function(a){return x(a)?this.u.getElementById(a):a};v.Wa=function(a,b,c){return ie(this.u,arguments)};v.createElement=function(a){return this.u.createElement(a)};v.createTextNode=function(a){return this.u.createTextNode(a)};function oe(a){return"CSS1Compat"==a.u.compatMode}function pe(a){var b=a.u,a=!E&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new T(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}v.appendChild=function(a,b){a.appendChild(b)};
v.contains=ne;D||Pa&&G("1.9.3");function qe(a,b){var c=de(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,q))?c[b]||c.getPropertyValue(b):""}function re(a,b){return a.currentStyle?a.currentStyle[b]:q}function se(a,b){return qe(a,b)||re(a,b)||a.style&&a.style[b]}function te(a){a=a?9==a.nodeType?a:de(a):document;return D&&!db(9)&&!oe(be(a))?a.body:a.documentElement}
function ue(a){var b=a.getBoundingClientRect();if(D)a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop;return b}
function ve(a){if(D&&!db(8))return a.offsetParent;for(var b=de(a),c=se(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=se(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return q}
function we(a){for(var b=new Xd(0,Infinity,Infinity,0),c=be(a),d=c.u.body,f=c.u.documentElement,e=!E&&"CSS1Compat"==c.u.compatMode?c.u.documentElement:c.u.body;a=ve(a);)if((!D||0!=a.clientWidth)&&(!E||0!=a.clientHeight||a!=d)&&a!=d&&a!=f&&"visible"!=se(a,"overflow")){var h=xe(a),i;i=a;if(Pa&&!G("1.9")){var k=parseFloat(qe(i,"borderLeftWidth"));if(ye(i))var o=i.offsetWidth-i.clientWidth-k-parseFloat(qe(i,"borderRightWidth")),k=k+o;i=new T(k,parseFloat(qe(i,"borderTopWidth")))}else i=new T(i.clientLeft,
i.clientTop);h.x+=i.x;h.y+=i.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=e.scrollLeft;e=e.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,e);c=c.u.parentWindow||c.u.defaultView||window;f=c.document;E&&!G("500")&&!Qa?("undefined"==typeof c.innerHeight&&(c=window),f=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<f&&(f-=15),c=new md(c.innerWidth,f)):(c="CSS1Compat"==
f.compatMode?f.documentElement:f.body,c=new md(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,e+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:q}
function xe(a){var b,c=de(a),d=se(a,"position"),f=Pa&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),e=new T(0,0),h=te(c);if(a==h)return e;if(a.getBoundingClientRect)b=ue(a),a=pe(be(c)),e.x=b.left+a.x,e.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),e.x=b.screenX-a.screenX,e.y=b.screenY-a.screenY;else{b=a;do{e.x+=b.offsetLeft;e.y+=b.offsetTop;b!=a&&(e.x+=b.clientLeft||0,e.y+=b.clientTop||0);
if(E&&"fixed"==se(b,"position")){e.x+=c.body.scrollLeft;e.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Oa||E&&"absolute"==d)e.y-=c.body.offsetTop;for(b=a;(b=ve(b))&&b!=c.body&&b!=h;)if(e.x-=b.scrollLeft,!Oa||"TR"!=b.tagName)e.y-=b.scrollTop}return e}function ze(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function Ge(a){if("none"!=se(a,"display"))return He(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=He(a);b.display=c;b.position=f;b.visibility=d;return a}function He(a){var b=a.offsetWidth,c=a.offsetHeight,d=E&&!b&&!c;return(!ea(b)||d)&&a.getBoundingClientRect?(a=ue(a),new md(a.right-a.left,a.bottom-a.top)):new md(b,c)}function Ie(a,b){a.style.display=b?"":"none"}function ye(a){return"rtl"==se(a,"direction")}
function Je(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}var Ke={thin:2,medium:4,thick:6};function Le(a,b){if("none"==re(a,b+"Style"))return 0;var c=re(a,b+"Width");return c in Ke?Ke[c]:Je(a,c)};function Me(){}(function(a){a.Ke=function(){return a.zg||(a.zg=new a)}})(Me);Me.prototype.Id=0;Me.Ke();function Ne(a){this.aa=a||be();this.Vg=Oe}C(Ne,Tc);Ne.prototype.yg=Me.Ke();var Oe=q;v=Ne.prototype;v.Re=q;v.Za=r;v.f=q;v.Vg=q;v.Jg=q;v.pb=q;v.mb=q;v.Ob=q;v.zh=r;v.e=t("f");v.Sd=function(a){this.pb&&this.pb!=a&&g(Error("Method not supported"));Ne.B.Sd.call(this,a)};v.Tb=t("aa");v.Wa=function(){this.f=this.aa.createElement("div")};v.sb=function(a){this.tb(a)};
v.tb=function(a,b){this.Za&&g(Error("Component already rendered"));this.f||this.Wa();a?a.insertBefore(this.f,b||q):this.aa.u.body.appendChild(this.f);(!this.pb||this.pb.Za)&&this.Ac()};v.Ac=function(){this.Za=p;Pe(this,function(a){!a.Za&&a.e()&&a.Ac()})};v.Rb=function(){Pe(this,function(a){a.Za&&a.Rb()});this.Cc&&this.Cc.Nc();this.Za=r};
v.t=function(){Ne.B.t.call(this);this.Za&&this.Rb();this.Cc&&(this.Cc.$(),delete this.Cc);Pe(this,function(a){a.$()});!this.zh&&this.f&&le(this.f);this.pb=this.Jg=this.f=this.Ob=this.mb=q};v.Xb=function(){return!!this.mb&&0!=this.mb.length};function Pe(a,b){a.mb&&lb(a.mb,b,j)}
v.removeChild=function(a,b){if(a){var c=x(a)?a:a.Re||(a.Re=":"+(a.yg.Id++).toString(36)),a=this.Ob&&c?(c in this.Ob?this.Ob[c]:j)||q:q;if(c&&a){var d=this.Ob;c in d&&delete d[c];pb(this.mb,a);b&&(a.Rb(),a.f&&le(a.f));c=a;c==q&&g(Error("Unable to set parent component"));c.pb=q;Ne.B.Sd.call(c,q)}}a||g(Error("Child is not in parent component"));return a};var Qe=ba.window;function Re(a,b,c){ia(a)?c&&(a=ta(a,c)):a&&"function"==typeof a.handleEvent?a=ta(a.handleEvent,a):g(Error("Invalid listener argument"));return 2147483647<b?-1:Qe.setTimeout(a,b||0)};function Se(a,b){this.ca=new Ud(this);this.Rd(a||q);b&&this.ub(b)}C(Se,Tc);v=Se.prototype;v.f=q;v.cg=p;v.we=q;v.N=r;v.kh=r;v.Ed=-1;v.Xe=-1;v.xg=r;v.ng=p;v.vb="toggle_display";v.ub=aa("vb");v.e=t("f");v.Rd=function(a){this.N&&g(Error("Can not change this state of the popup while showing."));this.f=a};
v.K=function(a){this.ic&&this.ic.stop();this.Yb&&this.Yb.stop();if(a){if(!this.N&&this.Ld()){this.f||g(Error("Caller must call setElement before trying to show the popup"));this.la();a=de(this.f);this.xg&&Wd(this.ca,a,"keydown",this.Mg,p);if(this.cg)if(Wd(this.ca,a,"mousedown",this.ff,p),D){var b;try{b=a.activeElement}catch(c){}for(;b&&"IFRAME"==b.nodeName;){try{var d=b.contentDocument||b.contentWindow.document}catch(f){break}a=d;b=a.activeElement}Wd(this.ca,a,"mousedown",this.ff,p);Wd(this.ca,a,
"deactivate",this.ef)}else Wd(this.ca,a,"blur",this.ef);"toggle_display"==this.vb?(this.f.style.visibility="visible",Ie(this.f,p)):"move_offscreen"==this.vb&&this.la();this.N=p;this.ic?(mc(this.ic,"end",this.rf,r,this),this.ic.play()):this.rf()}}else Te(this)};v.la=ca;function Te(a,b){if(!a.N||!a.dispatchEvent({type:"beforehide",target:b}))return r;a.ca&&a.ca.Nc();a.Yb?(mc(a.Yb,"end",ua(a.ze,b),r,a),a.Yb.play()):a.ze(b);return p}
v.ze=function(a){if("toggle_display"==this.vb)this.kh?Re(this.Qe,0,this):this.Qe();else if("move_offscreen"==this.vb)this.f.style.left="-200px",this.f.style.top="-200px";this.N=r;this.Md(a)};v.Qe=function(){this.f.style.visibility="hidden";Ie(this.f,r)};v.Ld=function(){return this.dispatchEvent("beforeshow")};v.rf=function(){this.Ed=va();this.Xe=-1;this.dispatchEvent("show")};v.Md=function(a){this.Xe=va();this.dispatchEvent({type:"hide",target:a})};
v.ff=function(a){a=a.target;!ne(this.f,a)&&(!this.we||ne(this.we,a))&&!(150>va()-this.Ed)&&Te(this,a)};v.Mg=function(a){27==a.keyCode&&Te(this,a.target)&&(a.preventDefault(),a.stopPropagation())};v.ef=function(a){if(this.ng){var b=de(this.f);if(D||Oa){if(a=b.activeElement,!a||ne(this.f,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>va()-this.Ed||Te(this)}};v.t=function(){Se.B.t.call(this);this.ca.$();Ob(this.ic);Ob(this.Yb);delete this.f;delete this.ca};function Ue(a){this.aa=a||be();H.call(this)}C(Ue,H);v=Ue.prototype;v.fg="goog-buttonset";v.De=q;v.f=q;v.eg=q;v.set=function(a,b,c,d){H.prototype.set.call(this,a,b);if(c)this.De=a;if(d)this.eg=a;return this};function Ve(a,b,c,d){return a.set(b.key,b.caption,c,d)}v.sb=function(){if(this.f){this.f.innerHTML="";var a=be(this.f);wb(this,function(b,c){var d=a.Wa("button",{name:c},b);if(c==this.De)d.className=this.fg+"-default";this.f.appendChild(d)},this)}};v.e=t("f");v.Tb=t("aa");
var We={key:"ok",caption:"OK"},Xe={key:"cancel",caption:"Cancel"},Ye={key:"yes",caption:"Yes"},Ze={key:"no",caption:"No"},$e={key:"save",caption:"Save"},af={key:"continue",caption:"Continue"};"undefined"!=typeof document&&(Ve(new Ue,We,p,p),Ve(Ve(new Ue,We,p),Xe,r,p),Ve(Ve(new Ue,Ye,p),Ze,r,p),Ve(Ve(Ve(new Ue,Ye),Ze,p),Xe,r,p),Ve(Ve(Ve(new Ue,af),$e),Xe,p,p));function bf(a){this.Va=a||cf}function cf(a,b){return""+a<""+b?-1:""+a>""+b?1:0}v=bf.prototype;v.P=q;v.Va=q;v.ua=q;v.ta=q;v.h=0;
v.add=function(a){if(this.P==q)return this.ta=this.ua=this.P=new df(a),this.h=1,p;var b=r;ef(this,function(c){var d=q;if(0<this.Va(c.value,a)){if(d=c.left,c.left==q){var f=new df(a,c);c.left=f;if(c==this.ua)this.ua=f;b=p;ff(this,c)}}else if(0>this.Va(c.value,a)&&(d=c.right,c.right==q)){f=new df(a,c);c.right=f;if(c==this.ta)this.ta=f;b=p;ff(this,c)}return d});b&&(this.h+=1);return b};
v.remove=function(a){var b=q;ef(this,function(c){var d=q;if(0<this.Va(c.value,a))d=c.left;else if(0>this.Va(c.value,a))d=c.right;else if(b=c.value,c.left!=q||c.right!=q){var f=q,e;if(c.left!=q){e=gf(this,c.left);if(e!=c.left){if(e.parent.right=e.left)e.left.parent=e.parent;e.left=c.left;e.left.parent=e;f=e.parent}e.parent=c.parent;e.right=c.right;if(e.right)e.right.parent=e;if(c==this.ta)this.ta=e}else{e=hf(this,c.right);if(e!=c.right){if(e.parent.left=e.right)e.right.parent=e.parent;e.right=c.right;
e.right.parent=e;f=e.parent}e.parent=c.parent;e.left=c.left;if(e.left)e.left.parent=e;if(c==this.ua)this.ua=e}jf(c)?c.parent.left=e:kf(c)?c.parent.right=e:this.P=e;ff(this,f?f:e)}else if(jf(c)){this.ki=1;c.parent.left=q;if(c==this.ua)this.ua=c.parent;ff(this,c.parent)}else if(kf(c)){c.parent.right=q;if(c==this.ta)this.ta=c.parent;ff(this,c.parent)}else this.clear();return d});if(b)this.h=this.P?this.h-1:0;return b};v.clear=function(){this.ta=this.ua=this.P=q;this.h=0};
v.contains=function(a){var b=r;ef(this,function(c){var d=q;0<this.Va(c.value,a)?d=c.left:0>this.Va(c.value,a)?d=c.right:b=p;return d});return b};v.ia=t("h");v.Wb=function(){return hf(this).value};v.Vb=function(){return gf(this).value};v.ba=function(){var a=[];lf(this,function(b){a.push(b)});return a};
function lf(a,b){if(a.P){var c,d=c=hf(a);for(c=c.left?c.left:c;d!=q;)if(d.left!=q&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var f=d,d=d.right!=q&&d.right!=c?d.right:d.parent;c=f}}}function ef(a,b,c){for(c=c?c:a.P;c&&c!=q;)c=b.call(a,c)}
function ff(a,b){ef(a,function(a){var b=a.left?a.left.height:0,f=a.right?a.right.height:0;1<b-f?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&mf(this,a.left),nf(this,a)):1<f-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&nf(this,a.right),mf(this,a));b=a.left?a.left.height:0;f=a.right?a.right.height:0;a.height=Math.max(b,f)+1;return a.parent},b)}
function mf(a,b){jf(b)?(b.parent.left=b.right,b.right.parent=b.parent):kf(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.P=b.right,a.P.parent=q);var c=b.right;b.right=b.right.left;if(b.right!=q)b.right.parent=b;c.left=b;b.parent=c}function nf(a,b){jf(b)?(b.parent.left=b.left,b.left.parent=b.parent):kf(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.P=b.left,a.P.parent=q);var c=b.left;b.left=b.left.right;if(b.left!=q)b.left.parent=b;c.right=b;b.parent=c}
function hf(a,b){if(!b)return a.ua;var c=b;ef(a,function(a){var b=q;if(a.left)b=c=a.left;return b},b);return c}function gf(a,b){if(!b)return a.ta;var c=b;ef(a,function(a){var b=q;if(a.right)b=c=a.right;return b},b);return c}function df(a,b){this.value=a;this.parent=b?b:q}df.prototype.left=q;df.prototype.right=q;df.prototype.height=1;function kf(a){return!!a.parent&&a.parent.right==a}function jf(a){return!!a.parent&&a.parent.left==a};function of(){}C(of,Tc);v=of.prototype;v.Wd=0;v.ac=0;v.Hd=100;v.Je=0;v.Vd=1;v.Bg=r;v.Kg=r;v.Sc=function(a){a=pf(this,a);if(this.Wd!=a)this.Wd=a+this.Je>this.Hd?this.Hd-this.Je:a<this.ac?this.ac:a,!this.Bg&&!this.Kg&&this.dispatchEvent("change")};v.Bc=function(){return pf(this,this.Wd)};v.Wb=function(){return pf(this,this.ac)};v.Vb=function(){return pf(this,this.Hd)};function pf(a,b){return a.Vd==q?b:a.ac+Math.round((b-a.ac)/a.Vd)*a.Vd};function qf(a){Ne.call(this,a);this.qb=new of;I(this.qb,"change",this.vg,r,this)}C(qf,Ne);var rf={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};v=qf.prototype;v.Wa=function(){this.da=this.Tb().Wa("div","progress-bar-thumb");var a=rf[this.tf];this.f=this.Tb().Wa("div",a,this.da);sf(this);this.e().setAttribute("aria-valuemin",this.Wb());this.e().setAttribute("aria-valuemax",this.Vb())};
v.Ac=function(){qf.B.Ac.call(this);D&&7>Va&&I(this.e(),"resize",this.Uc,r,this);this.Uc();var a=this.e();a.setAttribute("role","progressbar");a.ji="progressbar";this.e().setAttribute("aria-live","polite")};v.Rb=function(){qf.B.Rb.call(this);tf(this)};function tf(a){D&&7>Va&&nc(a.e(),"resize",a.Uc,r,a)}v.Bc=function(){return this.qb.Bc()};v.Sc=function(a){this.qb.Sc(a);this.e()&&sf(this)};function sf(a){var b=a.Bc();a.e().setAttribute("aria-valuenow",b)}v.Wb=function(){return this.qb.Wb()};v.Vb=function(){return this.qb.Vb()};
v.tf="horizontal";v.vg=function(){this.Uc();this.dispatchEvent("change")};v.Uc=function(){if(this.da){var a=this.Wb(),b=this.Vb(),a=(this.Bc()-a)/(b-a),b=Math.round(100*a);"vertical"==this.tf?D&&7>Va?(this.da.style.top=0,this.da.style.height="100%",b=this.da.offsetHeight,a=Math.round(a*b),this.da.style.top=b-a+"px",this.da.style.height=a+"px"):(this.da.style.top=100-b+"%",this.da.style.height=b+"%"):this.da.style.width=b+"%"}};v.t=function(){tf(this);qf.B.t.call(this);this.da=q;this.qb.$()};function uf(a,b){w(a)||g(Error("No valid parent element."));w(b)||g(Error("Invalid initial value."));qf.call(this);this._className="progressbar";this.Ia=a;this.oc=this.pa=q;this.Pa=[];this.Pa=[".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n  background: white;\n  padding: 1px;\n  overflow: hidden;\n  margin: 2px;\n  width: 100px;\n  height: 5px;\n}",".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n  overflow: hidden;\n  width: 0%;\n  height: 100%;\n}",
".progress-bar-thumb-done {\n  background: #57E964;\n}"];this.Sc(b);this.Dd()}C(uf,qf);
uf.prototype.Dd=function(){this.Ia.style.position="relative";var a=document.getElementsByTagName("head")[0],b=he("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Pa[0]),d=document.createTextNode(this.Pa[1]),f=document.createTextNode(this.Pa[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(f);this.pa=b;this.sb(this.Ia);a=this.e();a.style.position="absolute";a.style.top=(this.Ia.clientHeight-5)/2;a.style.left=(this.Ia.clientWidth-100)/2};
uf.prototype.He=function(){var a=this.e().style.top,b=this.e().style.left;le(this.e());var c=new uf(this.Ia,100),d=c.e();d.style.position="absolute";d.style.top=a;d.style.left=b;(d.firstElementChild!=j?d.firstElementChild:me(d.firstChild)).classList.add("progress-bar-thumb-done");this.oc=c};uf.prototype.Zb=function(){this.pa&&le(this.pa);this.e()&&le(this.e());this.oc&&le(this.oc.e());this.oc=this.pa=q};A("X.progressbar",uf);A("X.progressbar.prototype.done",uf.prototype.He);
A("X.progressbar.prototype.kill",uf.prototype.Zb);function vf(a,b,c){w(a)||g(Error("Invalid GL Buffer."));w(b)||g(Error("Invalid number of items."));w(c)||g(Error("Invalid item size."));O.call(this);this._className="buffer";this.L=a;this.bd=b;this.Sa=c}C(vf,O);vf.prototype.ug=t("L");vf.prototype.Dg=t("bd");vf.prototype.Eg=t("Sa");A("X.buffer",vf);A("X.buffer.prototype.glBuffer",vf.prototype.ug);A("X.buffer.prototype.itemCount",vf.prototype.Dg);A("X.buffer.prototype.itemSize",vf.prototype.Eg);function wf(a,b,c,d,f,e,h,i){var k,o=c.offsetParent;if(o){var l="HTML"==o.tagName||"BODY"==o.tagName;if(!l||"static"!=se(o,"position"))k=xe(o),l||(k=ld(k,new T(o.scrollLeft,o.scrollTop)))}o=xe(a);l=Ge(a);o=new Yd(o.x,o.y,l.width,l.height);(l=we(a))&&o.Ue(new Yd(l.left,l.top,l.right-l.left,l.bottom-l.top));var l=be(a),n=be(c);if(l.u!=n.u){var m=l.u.body,n=n.u.parentWindow||n.u.defaultView,s=new T(0,0),u=de(m)?de(m).parentWindow||de(m).defaultView:window,z=m;do{var B;if(u==n)B=xe(z);else{var F=z;B=
new T;if(1==F.nodeType)if(F.getBoundingClientRect)F=ue(F),B.x=F.left,B.y=F.top;else{var Y=pe(be(F)),F=xe(F);B.x=F.x-Y.x;B.y=F.y-Y.y}else{var Y=ia(F.tg),M=F;F.targetTouches?M=F.targetTouches[0]:Y&&F.ha.targetTouches&&(M=F.ha.targetTouches[0]);B.x=M.clientX;B.y=M.clientY}}s.x+=B.x;s.y+=B.y}while(u&&u!=n&&(z=u.frameElement)&&(u=u.parent));m=ld(s,xe(m));D&&!oe(l)&&(m=ld(m,pe(l)));o.left+=m.x;o.top+=m.y}a=(b&4&&ye(a)?b^2:b)&-5;b=new T(a&2?o.left+o.width:o.left,a&1?o.top+o.height:o.top);k&&(b=ld(b,k));
f&&(b.x+=(a&2?-1:1)*f.x,b.y+=(a&1?-1:1)*f.y);var J;if(h&&(J=we(c))&&k)J.top-=k.y,J.right-=k.x,J.bottom-=k.y,J.left-=k.x;return xf(b,c,d,e,J,h,i)}
function xf(a,b,c,d,f,e,h){var a=a.c(),i=0,k=(c&4&&ye(b)?c^2:c)&-5,c=Ge(b),h=h?h.c():c.c();if(d||0!=k)k&2?a.x-=h.width+(d?d.right:0):d&&(a.x+=d.left),k&1?a.y-=h.height+(d?d.bottom:0):d&&(a.y+=d.top);if(e){if(f){i=a;d=0;if(65==(e&65)&&(i.x<f.left||i.x>=f.right))e&=-2;if(132==(e&132)&&(i.y<f.top||i.y>=f.bottom))e&=-5;if(i.x<f.left&&e&1)i.x=f.left,d|=1;if(i.x<f.left&&i.x+h.width>f.right&&e&16)h.width=Math.max(h.width-(i.x+h.width-f.right),0),d|=4;if(i.x+h.width>f.right&&e&1)i.x=Math.max(f.right-h.width,
f.left),d|=1;e&2&&(d|=(i.x<f.left?16:0)|(i.x+h.width>f.right?32:0));if(i.y<f.top&&e&4)i.y=f.top,d|=2;if(i.y>=f.top&&i.y+h.height>f.bottom&&e&32)h.height=Math.max(h.height-(i.y+h.height-f.bottom),0),d|=8;if(i.y+h.height>f.bottom&&e&4)i.y=Math.max(f.bottom-h.height,f.top),d|=2;e&8&&(d|=(i.y<f.top?64:0)|(i.y+h.height>f.bottom?128:0));i=d}else i=256;if(i&496)return i}e=a;f=Pa&&(Ia||Ta)&&G("1.9");e instanceof T?(a=e.x,e=e.y):(a=e,e=j);b.style.left=ze(a,f);b.style.top=ze(e,f);if(!nd(c,h))a=oe(be(de(b))),
D&&(!a||!G("8"))?(c=b.style,a?(D?(a=Je(b,re(b,"paddingLeft")),f=Je(b,re(b,"paddingRight")),e=Je(b,re(b,"paddingTop")),d=Je(b,re(b,"paddingBottom")),a=new Xd(e,f,d,a)):(a=qe(b,"paddingLeft"),f=qe(b,"paddingRight"),e=qe(b,"paddingTop"),d=qe(b,"paddingBottom"),a=new Xd(parseFloat(e),parseFloat(f),parseFloat(d),parseFloat(a))),D?(f=Le(b,"borderLeft"),e=Le(b,"borderRight"),d=Le(b,"borderTop"),b=Le(b,"borderBottom"),b=new Xd(d,e,b,f)):(f=qe(b,"borderLeftWidth"),e=qe(b,"borderRightWidth"),d=qe(b,"borderTopWidth"),
b=qe(b,"borderBottomWidth"),b=new Xd(parseFloat(d),parseFloat(e),parseFloat(b),parseFloat(f))),c.pixelWidth=h.width-b.left-a.left-a.right-b.right,c.pixelHeight=h.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=h.width,c.pixelHeight=h.height)):(b=b.style,Pa?b.MozBoxSizing="border-box":E?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(h.width,0)+"px",b.height=Math.max(h.height,0)+"px");return i};function yf(){}yf.prototype.la=function(){};function zf(a,b){this.element=a;this.Ae=b}C(zf,yf);zf.prototype.la=function(a,b,c){wf(this.element,this.Ae,a,b,j,c)};function Af(a,b){this.ud=a instanceof T?a:new T(a,b)}C(Af,yf);Af.prototype.la=function(a,b,c,d){wf(te(a),0,a,b,this.ud,c,q,d)};function Bf(a,b){this.Sg=4;this.Qd=b||j;Se.call(this,a)}C(Bf,Se);Bf.prototype.Qc=function(a){this.Qd=a||j;this.N&&this.la()};Bf.prototype.la=function(){if(this.Qd){var a=!this.N&&"move_offscreen"!=this.vb,b=this.e();if(a)b.style.visibility="hidden",Ie(b,p);this.Qd.la(b,this.Sg,this.hi);a&&Ie(b,r)}};function Cf(a,b,c){this.aa=c||(a?be(ee(a)):be());Bf.call(this,this.aa.Wa("div",{style:"position:absolute;display:none;"}));this.vd=new T(1,1);this.Ya=new Jb;a&&Df(this,a);if(b!=q)if(a=this.e(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(de(a).createTextNode(b))}}C(Cf,Bf);var Ef=[];v=Cf.prototype;v.I=q;v.className="goog-tooltip";
v.Df=500;v.wg=0;v.Tb=t("aa");function Df(a,b){b=ee(b);a.Ya.add(b);I(b,"mouseover",a.Ne,r,a);I(b,"mouseout",a.Dc,r,a);I(b,"mousemove",a.Me,r,a);I(b,"focus",a.Le,r,a);I(b,"blur",a.Dc,r,a)}v.detach=function(a){if(a)a=ee(a),Ff(this,a),this.Ya.remove(a);else{for(var b=this.Ya.ba(),c=0;a=b[c];c++)Ff(this,a);this.Ya.clear()}};function Ff(a,b){nc(b,"mouseover",a.Ne,r,a);nc(b,"mouseout",a.Dc,r,a);nc(b,"mousemove",a.Me,r,a);nc(b,"focus",a.Le,r,a);nc(b,"blur",a.Dc,r,a)}
v.Rd=function(a){var b=this.e();b&&le(b);Cf.B.Rd.call(this,a);if(a)b=this.aa.u.body,b.insertBefore(a,b.lastChild)};v.Ld=function(){if(!Se.prototype.Ld.call(this))return r;if(this.anchor)for(var a,b=0;a=Ef[b];b++)ne(a.e(),this.anchor)||a.K(r);0<=kb(Ef,this)||Ef.push(this);a=this.e();a.className=this.className;Gf(this);I(a,"mouseover",this.Pe,r,this);I(a,"mouseout",this.Oe,r,this);Hf(this);return p};
v.Md=function(){pb(Ef,this);for(var a=this.e(),b,c=0;b=Ef[c];c++)b.anchor&&ne(a,b.anchor)&&b.K(r);this.vf&&If(this.vf);nc(a,"mouseover",this.Pe,r,this);nc(a,"mouseout",this.Oe,r,this);this.anchor=j;if(0==(this.wa?this.N?4:1:this.nb?3:this.N?2:0))this.Pc=r;Se.prototype.Md.call(this)};v.cf=function(a,b){if(this.anchor==a&&this.Ya.contains(this.anchor))if(this.Pc||!this.ii){if(this.K(r),!this.N)this.anchor=a,this.Qc(b||Jf(this,0)),this.K(p)}else this.anchor=j;this.wa=j};
v.Ig=function(a){this.nb=j;a==this.anchor&&(this.I==q||this.I!=this.e()&&!this.Ya.contains(this.I))&&(!this.xe||!this.xe.I)&&this.K(r)};function Kf(a,b){var c=pe(a.aa);a.vd.x=b.clientX+c.x;a.vd.y=b.clientY+c.y}v.Ne=function(a){var b=Lf(this,a.target);this.I=b;Gf(this);if(b!=this.anchor){this.anchor=b;if(!this.wa)this.wa=Re(ta(this.cf,this,b,j),this.Df);Mf(this);Kf(this,a)}};function Lf(a,b){try{for(;b&&!a.Ya.contains(b);)b=b.parentNode;return b}catch(c){return q}}
v.Me=function(a){Kf(this,a);this.Pc=p};v.Le=function(a){this.I=a=Lf(this,a.target);this.Pc=p;if(this.anchor!=a){this.anchor=a;var b=Jf(this,1);Gf(this);if(!this.wa)this.wa=Re(ta(this.cf,this,a,b),this.Df);Mf(this)}};function Jf(a,b){if(0==b){var c=a.vd.c();return new Nf(c)}return new Of(a.I)}function Mf(a){if(a.anchor)for(var b,c=0;b=Ef[c];c++)if(ne(b.e(),a.anchor))b.xe=a,a.vf=b}
v.Dc=function(a){var b=Lf(this,a.target),c=Lf(this,a.relatedTarget);if(b!=c){if(b==this.I)this.I=q;Hf(this);this.Pc=r;this.N&&(!a.relatedTarget||!ne(this.e(),a.relatedTarget))?If(this):this.anchor=j}};v.Pe=function(){var a=this.e();if(this.I!=a)Gf(this),this.I=a};v.Oe=function(a){var b=this.e();if(this.I==b&&(!a.relatedTarget||!ne(b,a.relatedTarget)))this.I=q,If(this)};function Hf(a){if(a.wa)Qe.clearTimeout(a.wa),a.wa=j}
function If(a){if(2==(a.wa?a.N?4:1:a.nb?3:a.N?2:0))a.nb=Re(ta(a.Ig,a,a.anchor),a.wg)}function Gf(a){if(a.nb)Qe.clearTimeout(a.nb),a.nb=j}v.t=function(){this.K(r);Hf(this);this.detach();this.e()&&le(this.e());this.I=q;delete this.aa;Cf.B.t.call(this)};function Nf(a,b){Af.call(this,a,b)}C(Nf,Af);Nf.prototype.la=function(a,b,c){b=te(a);b=we(b);c=c?new Xd(c.top+10,c.right,c.bottom,c.left+10):new Xd(10,0,0,10);xf(this.ud,a,4,c,b,9)&496&&xf(this.ud,a,4,c,b,5)};function Of(a){zf.call(this,a,3)}C(Of,zf);
Of.prototype.la=function(a,b,c){var d=new T(10,0);wf(this.element,this.Ae,a,b,d,c,9)&496&&wf(this.element,2,a,1,d,c,5)};function Pf(a){this.f=a;this.Ye=I(this.f,Pa?"DOMMouseScroll":"mousewheel",this)}C(Pf,Tc);
Pf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.ha;if("mousewheel"==a.type){c=1;if(D||E&&(Ja||G("532.0")))c=40;d=E&&Ia&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;ea(a.wheelDeltaX)?(b=E&&Ia&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=E&&Ia&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ea(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;y(this.af)&&(b=Math.min(Math.max(b,-this.af),this.af));y(this.bf)&&(c=Math.min(Math.max(c,
-this.bf),this.bf));b=new Rf(d,a,b,c);try{this.dispatchEvent(b)}finally{b.$()}};Pf.prototype.t=function(){Pf.B.t.call(this);oc(this.Ye);delete this.Ye};function Rf(a,b,c,d){b&&this.ja(b,j);this.type="mousewheel";this.detail=a;this.ei=c;this.wd=d}C(Rf,dc);D||E&&G("525");function W(a){(!w(a)||!(a instanceof Element))&&g(Error("Could not add interactor to the given element."));O.call(this);this._className="interactor";this.gb=a;this.hd=this.he=this.ge=this.ie=this.fe=this.je=q;this.gd=p;this.Kb=this.Eb=this.jb=r;this.cd=new Hc(0,0)}C(W,O);v=W.prototype;v.l={ce:p,be:p,lc:p,ae:p,$d:r};
v.ja=function(){this.l.ce?(this.hd=new Pf(this.gb),this.je=I(this.hd,"mousewheel",this.nf.bind(this))):(oc(this.je),this.hd=q);this.l.be?(this.fe=I(this.gb,"mousedown",this.jf.bind(this)),this.ie=I(this.gb,"mouseup",this.mf.bind(this))):(oc(this.fe),oc(this.ie));this.gb.oncontextmenu=this.l.$d?q:function(){return r};window.onkeydown=this.l.lc?this.Nd.bind(this):q;oc(this.ge);oc(this.he);this.ge=I(this.gb,"mousemove",this.kf.bind(this));this.he=I(this.gb,"mouseout",this.lf.bind(this))};
v.jf=function(a){if(0==a.button)this.jb=p;else if(1==a.button)this.Eb=p;else if(2==a.button)this.Kb=p;Sf(this);a.preventDefault()};v.mf=function(a){if(0==a.button)this.jb=r;else if(1==a.button)this.Eb=r;else if(2==a.button)this.Kb=r;Sf(this);a.preventDefault()};v.lf=function(a){this.gd=r;if(this.l.lc)window.onkeydown=q;this.Kb=this.Eb=this.jb=r;Sf(this);this.cd=new Hc(0,0);a.preventDefault()};
v.kf=function(a){this.dispatchEvent("mouseup");this.gd=p;if(this.l.lc&&window.onkeydown==q)window.onkeydown=this.Nd.bind(this);a.preventDefault();var b=a.shiftKey,c=new Hc(a.offsetX,a.offsetY),a=this.cd.ma(c);this.cd=c.c();if(this.l.ae)(0<Math.abs(a.x)||0<Math.abs(a.y)||this.Eb||this.jb||this.Kb)&&Sf(this),this.Yc=setTimeout(function(){Sf(this);var a=new Lc;a.vc=c.x;a.wc=c.y;this.dispatchEvent(a);this.Yc=q}.bind(this),300);if(2>Math.abs(a.x))a.x=0;if(2>Math.abs(a.y))a.y=0;if(0!=a.Hc())if(this.jb&&
!b)b=new Ic,b.fb=a,b.Tf=0,this.dispatchEvent(b);else if(this.Eb||this.jb&&b){b=new Gc;if(5<a.x)a.x=5;else if(-5>a.x)a.x=-5;if(5<a.y)a.y=5;else if(-5>a.y)a.y=-5;b.fb=a;this.dispatchEvent(b)}else if(this.Kb)b=new Jc,b.Ra=0<a.y,b.za=r,this.dispatchEvent(b)};function Sf(a){a.Yc&&clearTimeout(a.Yc);a.dispatchEvent(new Mc)}v.nf=function(a){Sf(this);a.preventDefault();var b=new Jc;if(!w(a.wd))a.wd=0;b.Ra=0>a.wd;b.za=p;this.dispatchEvent(b)};
v.Nd=function(a){if(this.gd){Sf(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,f=a.shiftKey,e=a.keyCode;if(82==e&&!b&&!c&&!d&&!f)a.preventDefault(),a=new Nc,this.dispatchEvent(a);else if(37<=e&&40>=e&&(a.preventDefault(),a=f?new Gc:b?new Jc:new Ic)){c=new Hc(0,0);if(37==e){if(c.x=5,b)a.Ra=p,a.za=r}else if(39==e){if(c.x=-5,b)a.Ra=r,a.za=r}else if(38==e){if(c.y=5,b)a.Ra=p,a.za=p}else if(40==e&&(c.y=-5,b))a.Ra=r,a.za=p;a.fb=c;this.dispatchEvent(a)}}};A("X.interactor",W);
A("X.interactor.prototype.config",W.prototype.l);A("X.interactor.prototype.config.MOUSEWHEEL_ENABLED",W.prototype.l.ce);A("X.interactor.prototype.config.MOUSECLICKS_ENABLED",W.prototype.l.be);A("X.interactor.prototype.config.KEYBOARD_ENABLED",W.prototype.l.lc);A("X.interactor.prototype.config.HOVERING_ENABLED",W.prototype.l.ae);A("X.interactor.prototype.config.CONTEXTMENU_ENABLED",W.prototype.l.$d);A("X.interactor.prototype.init",W.prototype.ja);A("X.interactor.prototype.onMouseDown",W.prototype.jf);
A("X.interactor.prototype.onMouseUp",W.prototype.mf);A("X.interactor.prototype.onMouseMovementOutside",W.prototype.lf);A("X.interactor.prototype.onMouseMovementInside",W.prototype.kf);A("X.interactor.prototype.onMouseWheel",W.prototype.nf);A("X.interactor.prototype.onKey",W.prototype.Nd);function Tf(a,b,c,d){w(a)||g(Error("No valid parent element."));(!y(b)||!y(c))&&g(Error("Invalid coordinates."));(!w(d)||!(d instanceof W))&&g(Error("Invalid interactor."));Cf.call(this);this._className="caption";this.Ia=a;this.vc=b;this.wc=c;this.qc=d;this.pa=q;this.Pa=[];this.Pa=[".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n  border: 1px solid infotext;\n  padding: 1px;\n  font-family: sans-serif;\n}"];mc(d,Ec,this.Zb.bind(this));this.Dd()}C(Tf,Cf);
Tf.prototype.Dd=function(){this.Ia.style.position="relative";var a=document.getElementsByTagName("head")[0],b=he("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Pa[0]);a.appendChild(b);b.appendChild(c);this.pa=b;this.Qc(new Af(this.vc,this.wc));this.K(p);Df(this,this.Ia);this.e().classList.add("x-tooltip")};Tf.prototype.Zb=function(){this.K(r);this.pa&&le(this.pa);this.e()&&le(this.e());this.pa=q};A("X.caption",Tf);A("X.caption.prototype.kill",Tf.prototype.Zb);function Z(a,b){(!y(a)||!y(b))&&g(Error("A camera needs valid width and height values."));O.call(this);this._className="camera";this.Vf=45;this.rc=new N(0,0,100);this.pc=new N(0,0,0);this.Ua=new N(0,1,0);var c=Float32Array,d;d=a/b;var f=1*Math.tan(this.Vf*Math.PI/360),e=-f;d=new V([[2/(f*d-e*d),0,(f*d+e*d)/(f*d-e*d),0],[0,2/(f-e),(f+e)/(f-e),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]]);this.le=new c(d.A());this.n=Uf(this,this.rc,this.pc);this.hb=new Float32Array(this.n.A())}C(Z,O);v=Z.prototype;
v.Kd=function(a){(!w(a)||!(a instanceof W))&&g(Error("Could not observe the interactor."));I(a,xc,this.of.bind(this));I(a,yc,this.qf.bind(this));I(a,zc,this.sf.bind(this))};v.sf=function(a){a instanceof Jc||g(Error("Received no valid zoom event."));a.Ra?this.Of(a.za):this.Pf(a.za)};v.of=function(a){a instanceof Gc||g(Error("Received no valid pan event."));this.uf(a.fb)};v.qf=function(a){a instanceof Ic||g(Error("Received no valid rotate event."));this.rotate(a.fb)};v.Pg=t("le");v.view=t("n");
v.position=t("rc");v.Qc=function(a,b,c){(!y(a)||!y(b)||!y(c))&&g(Error("The position was invalid."));this.rc=new N(a,b,c);this.reset()};v.reset=function(){this.n=Uf(this,this.rc,this.pc);this.hb=new Float32Array(this.n.A())};v.focus=t("pc");v.ah=function(a,b,c){(!y(a)||!y(b)||!y(c))&&g(Error("The focus was invalid."));this.pc=new N(a,b,c);this.reset()};v.vh=t("Ua");v.ih=function(a,b,c){(!y(a)||!y(b)||!y(c))&&g(Error("The up-vector was invalid."));this.Ua=new N(a,b,c);this.reset()};
v.uf=function(a){a instanceof Hc||g(Error("Invalid distance vector for pan operation."));a=new N(-a.x,a.y,0);a=xd(4).translate(a);this.n=new V(a.multiply(this.n));this.hb=new Float32Array(this.n.A());this.dispatchEvent(new Kc)};
v.rotate=function(a){a instanceof Array&&2==a.length?a=new Hc(a[0],a[1]):a instanceof Hc||g(Error("Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=xd(4),d=new N(parseFloat(ud(this.n,0,0)),parseFloat(ud(this.n,0,1)),parseFloat(ud(this.n,0,2))),b=c.rotate(b,new N(parseFloat(ud(this.n,1,0)),parseFloat(ud(this.n,1,1)),parseFloat(ud(this.n,1,2)))),a=c.rotate(a,d);this.n=new V(this.n.multiply(a.multiply(b)));this.hb=new Float32Array(this.n.A());this.dispatchEvent(new Kc)};
v.Of=function(a){var b=20;w(a)&&!a&&(b=1);a=new N(0,0,b);a=xd(4).translate(a);this.n=new V(a.multiply(this.n));this.hb=new Float32Array(this.n.A());this.dispatchEvent(new Kc)};v.Pf=function(a){var b=30;w(a)&&!a&&(b=1);a=new N(0,0,-b);a=xd(4).translate(a);this.n=new V(a.multiply(this.n));this.hb=new Float32Array(this.n.A());this.dispatchEvent(new Kc)};
function Uf(a,b,c){(!(b instanceof N)||!(c instanceof N))&&g(Error("3D vectors required for calculating the view."));var d=xd(4),c=new N(b.x-c.x,b.y-c.y,b.b-c.b),c=c.normalize(),a=a.Ua.c();a.Pb(c)&&(a.b+=1.0E-6);var f=Sc(a,c),a=Sc(c,f),f=f.normalize(),a=a.normalize();U(d,0,0,f.x);U(d,0,1,f.y);U(d,0,2,f.b);U(d,0,3,0);U(d,1,0,a.x);U(d,1,1,a.y);U(d,1,2,a.b);U(d,1,3,0);U(d,2,0,c.x);U(d,2,1,c.y);U(d,2,2,c.b);U(d,2,3,0);U(d,3,0,0);U(d,3,1,0);U(d,3,2,0);U(d,3,3,1);b=b.c();return d.translate(b.z())}
A("X.camera",Z);A("X.camera.prototype.observe",Z.prototype.Kd);A("X.camera.prototype.onZoom",Z.prototype.sf);A("X.camera.prototype.onPan",Z.prototype.of);A("X.camera.prototype.onRotate",Z.prototype.qf);A("X.camera.prototype.perspective",Z.prototype.Pg);A("X.camera.prototype.view",Z.prototype.view);A("X.camera.prototype.position",Z.prototype.position);A("X.camera.prototype.setPosition",Z.prototype.Qc);A("X.camera.prototype.focus",Z.prototype.focus);A("X.camera.prototype.setFocus",Z.prototype.ah);
A("X.camera.prototype.up",Z.prototype.vh);A("X.camera.prototype.setUp",Z.prototype.ih);A("X.camera.prototype.pan",Z.prototype.uf);A("X.camera.prototype.rotate",Z.prototype.rotate);A("X.camera.prototype.zoomIn",Z.prototype.Of);A("X.camera.prototype.zoomOut",Z.prototype.Pf);A("X.camera.prototype.observe",Z.prototype.Kd);function $(a){w(a)||g(Error("An ID to a valid container (<div>..) is required."));a=ee(a);(!(ma(a)&&1==a.nodeType)||0==a.clientWidth||0==a.clientHeight)&&g(Error("Could not find the given container or it has an undefined size."));O.call(this);this._className="renderer";this.eb=a;this.Nb=this.eb.clientWidth;this.ib=this.eb.clientHeight;this.qc=this.ea=this.md=this.Zf=this.a=this.Oa=q;this.kb=new bf(Id);this.bg=[];this.Db=this.Hb=this.Cb=this.Gb=this.Bb=this.Fb=q;this.p=[0,0,0];this.me=q;this.ya=new H;
this.G=new H;this.Lb=new H;this.jd=new H;this.nc=new H;this.uc=new H;this.se=new H;this.ga=this.dd=q;this.ed=r;window.console.log("XTK Release 2 -- 2/12/12 -- http://www.goXTK.com")}C($,O);v=$.prototype;v.l={Wc:p,Vc:p,de:p};v.width=t("Nb");v.height=t("ib");v.canvas=function(){if(!w(this.Oa))this.Oa=he("canvas");return this.Oa};v.ig=t("eb");v.dg=t("ea");v.Ag=t("qc");v.sa=function(){if(!w(this.dd))this.dd=new Nd,I(this.sa(),Cc,this.pf.bind(this));return this.dd};
v.pf=function(a){this.ga&&this.ga.Sc(100*a.ue)};v.hf=function(a){w(a)&&a instanceof Oc&&Vf(this,a.Ha)};v.gf=function(a){if(w(a)&&a instanceof Lc){var b=a.vc,c=a.wc;if((a=this.get(this.wf(b,c)))&&a.caption())b=new Tf(this.eb,b+10,c+10,this.qc),a=a.caption(),b.e().innerHTML=a}};v.Ug=function(){this.Db=this.Hb=this.Cb=this.Gb=this.Bb=this.Fb=q;this.p=[0,0,0]};function Wf(a){if(a.l.Wc&&a.ga&&!a.oe)a.ga.He(),a.oe=Re(function(){this.oe=q;if(this.ga)this.ga.Zb(),this.ga=q;this.sb()}.bind(a),700)}
v.zf=function(){this.ea.reset();this.tb(r)};
v.ja=function(){var a=this.canvas();a.width=this.width();a.height=this.height();this.eb.appendChild(a);try{var b=a.getContext("experimental-webgl");b||g(Error())}catch(c){alert("WebGL not supported! See http://wiki.goXTK.com/index.php/X:Browsers for instructions.."),g(Error("WebGL not supported! See http://wiki.goXTK.com/index.php/X:Browsers for instructions.."))}try{if(b.clearColor(0,0,0,0),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.enable(b.DEPTH_TEST),
b.depthFunc(b.LEQUAL),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),this.l.Vc){var d=b.createFramebuffer(),f=b.createRenderbuffer(),e=b.createTexture();b.bindTexture(b.TEXTURE_2D,e);b.texImage2D(b.TEXTURE_2D,0,b.RGB,this.width(),this.height(),0,b.RGB,b.UNSIGNED_BYTE,q);b.bindFramebuffer(b.FRAMEBUFFER,d);b.bindRenderbuffer(b.RENDERBUFFER,f);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,this.width(),this.height());b.bindRenderbuffer(b.RENDERBUFFER,q);b.framebufferTexture2D(b.FRAMEBUFFER,
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,e,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,f);b.bindFramebuffer(b.FRAMEBUFFER,q);this.me=d}}catch(h){g(Error("Exception while accessing GL Context!\n"+h))}d=new W(a);d.ja();I(d,Bc,this.zf.bind(this));I(d,Dc,this.gf.bind(this));f=new Z(this.width(),this.height());f.Kd(d);I(f,Ac,this.tb.bind(this,r));this.Oa=a;this.a=b;this.ea=f;this.qc=d;this.ve(new Rd)};
v.ve=function(a){(!w(this.Oa)||!w(this.a)||!w(this.ea))&&g(Error("Renderer was not initialized properly."));(!w(a)||!(a instanceof Rd))&&g(Error("Could not add shaders."));a.Nf();var b=this.a.createShader(this.a.FRAGMENT_SHADER),c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,a.zb);this.a.shaderSource(c,a.Mb);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,this.a.COMPILE_STATUS)||g(Error("Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));
this.a.getShaderParameter(c,this.a.COMPILE_STATUS)||g(Error("Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));var d=this.a.createProgram();this.a.attachShader(d,c);this.a.attachShader(d,b);this.a.linkProgram(d);this.a.getProgramParameter(d,this.a.LINK_STATUS)||g(Error("Could not create shader program!\n"+this.a.getShaderInfoLog(b)+"\n"+this.a.getShaderInfoLog(c)+"\n"+this.a.getProgramInfoLog(d)));this.a.useProgram(d);this.md=d;Object.keys(Sd).forEach(function(a){a=eval("X.shaders.attributes."+
a);this.ya.set(a,this.a.getAttribLocation(this.md,a));this.a.enableVertexAttribArray(this.ya.get(a))}.bind(this));Object.keys(Td).forEach(function(a){a=eval("X.shaders.uniforms."+a);this.G.set(a,this.a.getUniformLocation(this.md,a))}.bind(this));this.Zf=a};v.add=function(a){this.bg.push(a);Vf(this,a)};
function Vf(a,b){(!w(a.Oa)||!w(a.a)||!w(a.ea))&&g(Error("Renderer was not initialized properly."));(!w(b)||!(b instanceof L))&&g(Error("Illegal object."));var c=r;a.get(b.id())&&(c=p);rc(b)||I(b,sc,a.hf.bind(a));var d=b.id(),f=b.j,e=b.m,h=b.W,i=b.T,k=b.file(),o=b.transform();if(w(i)&&w(i.file())&&i.file().d)c=a.sa(),w(b.T)||g(Error("Internal error during texture loading.")),d=new Image,i=b.T.file().path(),d.src=i,b.T.ee=d,mc(d,"load",c.Gg.bind(c,b)),Od(c).set(b.id(),r),Qd(c,0.3);else if(w(k)&&k.d)c=
a.sa(),w(b.file())||g(Error("Internal error during file loading.")),b.j.clear(),b.m.clear(),d=b.file().path(),i=d.split(".").pop(),i=i.toUpperCase(),"TRK"==i||"STL"==i||"FSM"==i||"VTK"==i||"NRRD"==i||g(Error("The "+i+" file format is not supported.")),i=new XMLHttpRequest,I(i,"abort",c.Ze.bind(c,i,b)),I(i,"error",c.Ze.bind(c,i,b)),I(i,"load",c.Fg.bind(c,i,b)),i.open("GET",d,p),i.overrideMimeType("text/plain; charset=x-user-defined"),i.setRequestHeader("Content-Type","text/plain"),i.send(q),Od(c).set(b.id(),
r);else{if(b.d&&b.Xb()){for(var k=b.children(),l=k.length,n=0,n=0;n<l;n++)Vf(a,k[n]);b.va()}if(0!=f.Z()){for(k=0;a.ed;)k++;a.ed=p;if(f.d||o.d){l=o.g;k=l.cc(new N(f.Ea,f.Fa,f.Ga));l=l.cc(new N(f.Ba,f.Ca,f.Da));if(a.Fb===q||k.x<a.Fb)a.Fb=k.x;if(a.Bb===q||l.x>a.Bb)a.Bb=l.x;if(a.Gb===q||k.y<a.Gb)a.Gb=k.y;if(a.Cb===q||l.y>a.Cb)a.Cb=l.y;if(a.Hb===q||k.b<a.Hb)a.Hb=k.b;if(a.Db===q||l.b>a.Db)a.Db=l.b;a.p=[(a.Fb+a.Bb)/2,(a.Gb+a.Cb)/2,(a.Hb+a.Db)/2];o.va()}c&&f.d&&(o=a.Lb.get(d),w(o)&&a.a.isBuffer(o.L)&&a.a.deleteBuffer(o.L));
o=q;!c||f.d?(o=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,o),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(f.all()),a.a.STATIC_DRAW),o=new vf(o,f.Z(),3),f.va()):o=a.Lb.get(d);Qd(a.sa(),0.3);c&&e.d&&(k=a.Lb.get(d),w(k)&&a.a.isBuffer(k.L)&&a.a.deleteBuffer(k.L));k=q;!c||e.d?(k=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,k),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(e.all()),a.a.STATIC_DRAW),k=new vf(k,e.Z(),3),e.va()):k=a.jd.get(d);Qd(a.sa(),0.3);c&&h.d&&(e=a.nc.get(d),w(e)&&
a.a.isBuffer(e.L)&&a.a.deleteBuffer(e.L));e=q;0<h.length()&&(!c||h.d?(h.length()!=f.length()&&g(Error("Mismatch between points and point colors.")),f=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,f),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(h.all()),a.a.STATIC_DRAW),e=new vf(f,h.Z(),3),h.va()):e=a.nc.get(d));Qd(a.sa(),0.3);c&&w(i)&&i.d&&(h=a.uc.get(d),w(h)&&a.a.isBuffer(h.L)&&a.a.deleteBuffer(h.L));h=q;if(w(i))!c||i.d?(h=b.Ta,w(h)||g(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),
f=a.a.createTexture(),f.Cd=i.Cd(),a.se.set(i.id(),f),a.a.pixelStorei(a.a.UNPACK_FLIP_Y_WEBGL,r),a.a.bindTexture(a.a.TEXTURE_2D,f),i.Jb?(a.a.texImage2D(a.a.TEXTURE_2D,0,a.a.RGBA,i.tc,i.sc,0,a.a.RGBA,a.a.UNSIGNED_BYTE,i.Jb),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_WRAP_S,a.a.CLAMP_TO_EDGE),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_WRAP_T,a.a.CLAMP_TO_EDGE)):a.a.texImage2D(a.a.TEXTURE_2D,0,a.a.RGBA,a.a.RGBA,a.a.UNSIGNED_BYTE,f.Cd),a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MAG_FILTER,a.a.LINEAR),
a.a.texParameteri(a.a.TEXTURE_2D,a.a.TEXTURE_MIN_FILTER,a.a.LINEAR),a.a.bindTexture(a.a.TEXTURE_2D,q),f=a.a.createBuffer(),a.a.bindBuffer(a.a.ARRAY_BUFFER,f),a.a.bufferData(a.a.ARRAY_BUFFER,new Float32Array(h),a.a.STATIC_DRAW),h=new vf(f,h.length,2),i.va()):h=a.uc.get(d);Qd(a.sa(),0.1);!c&&!a.kb.add(b)&&g(Error("Could not add object to this renderer."));a.Lb.set(d,o);a.jd.set(d,k);a.nc.set(d,e);a.uc.set(d,h);a.ed=r}}}
v.sb=function(){(!this.Oa||!this.a||!this.ea)&&g(Error("The renderer was not initialized properly."));if(!w(this.ne))if(Pd(this.sa()))this.ga?(Wf(this),eval("this.onShowtime()")):this.tb(r);else{if(this.l.Wc&&!this.ga)this.ga=new uf(this.eb,0);this.ne=Re(function(){this.ne=q;this.sb()}.bind(this),100)}};v.Ng=function(){};v.get=function(a){w(a)||g(Error("Invalid object id."));for(var b=this.kb.ba(),c=0,d=b.length,c=0;c<d;c++)if(b[c].id()==a)return b[c];return q};
v.wf=function(a,b){if(this.l.Vc){this.tb(p);var c=new Uint8Array(4);this.a.readPixels(a,this.ib-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);var d=Math.round(10*(c[0]/255)),f=Math.round(10*(c[1]/255)),c=Math.round(10*(c[2]/255));return 100*d+10*f+c}return-1};
v.tb=function(a){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.me):this.a.bindFramebuffer(this.a.FRAMEBUFFER,q);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var b=this.ea.le,c=this.ea.hb;this.a.uniformMatrix4fv(this.G.get("perspective"),r,b);this.a.uniformMatrix4fv(this.G.get("view"),r,c);b=this.p;this.a.uniform3f(this.G.get("center"),parseFloat(b[0]),parseFloat(b[1]),parseFloat(b[2]));if(this.l.de){var d=r,b=this.kb.ba(),c=b.length,f;for(f=0;f<c;++f){var e=b[f];if(1!=e.opacity()){var d=
e.j.mc,d=new N(d[0],d[1],d[2]),e=e.transform().g.cc(d),h=this.ea.view().cc(e),i=this.ea.focus(),e=i.x-h.x,d=i.y-h.y,h=i.b-h.b;b[f].zc=Math.sqrt(e*e+d*d+h*h);d=p}}if(d){this.kb.clear();for(f=0;f<c;++f)this.kb.add(b[f])}}b=this.kb.ba();c=b.length;for(f=0;f<c;++f)if(e=b[f]){if(e.Zd()){var h=e.id(),k=e.Gd(),d=this.Lb.get(h),o=this.jd.get(h),l=this.nc.get(h),i=this.uc.get(h);this.a.bindBuffer(this.a.ARRAY_BUFFER,d.L);this.a.vertexAttribPointer(this.ya.get("vertexPosition"),d.Sa,this.a.FLOAT,r,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,
o.L);this.a.vertexAttribPointer(this.ya.get("vertexNormal"),o.Sa,this.a.FLOAT,r,0,0);a?this.a.uniform1i(this.G.get("usePicking"),p):this.a.uniform1i(this.G.get("usePicking"),r);w(l)&&!a&&!k?(this.a.uniform1i(this.G.get("useObjectColor"),r),this.a.bindBuffer(this.a.ARRAY_BUFFER,l.L),this.a.vertexAttribPointer(this.ya.get("vertexColor"),l.Sa,this.a.FLOAT,r,0,0)):(o=p,k&&!a&&(o=r),this.a.uniform1i(this.G.get("useObjectColor"),o),k=e.color(),a&&(999<h&&g(Error("Id out of bounds.")),k=Math.floor(0.01*
h),o=Math.floor(0.1*h)-10*k,k=[k/10,o/10,(h-100*k-10*o)/10]),this.a.uniform3f(this.G.get("objectColor"),parseFloat(k[0]),parseFloat(k[1]),parseFloat(k[2])),this.a.vertexAttribPointer(this.ya.get("vertexColor"),d.Sa,this.a.FLOAT,r,0,0));this.a.uniform1f(this.G.get("objectOpacity"),parseFloat(e.opacity()));w(e.T)&&w(i)&&!a?(this.a.uniform1i(this.G.get("useTexture"),p),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.se.get(e.T.id())),this.a.uniform1i(this.G.get("textureSampler"),
0),this.a.bindBuffer(this.a.ARRAY_BUFFER,i.L),this.a.vertexAttribPointer(this.ya.get("vertexTexturePos"),i.Sa,this.a.FLOAT,r,0,0)):(this.a.uniform1i(this.G.get("useTexture"),r),this.a.vertexAttribPointer(this.ya.get("vertexTexturePos"),d.Sa,this.a.FLOAT,r,0,0));this.a.uniformMatrix4fv(this.G.get("objectTransform"),r,zd(e.transform()));h=1;"POINTS"==e.type()&&(h=e.Pd());this.a.uniform1f(this.G.get("pointSize"),h);h=-1;e.type()==Fd?h=this.a.TRIANGLES:e.type()==$c?(this.a.lineWidth(e.lineWidth()),h=
this.a.LINES):"POINTS"==e.type()?h=this.a.POINTS:"TRIANGLE_STRIPS"==e.type()?h=this.a.TRIANGLE_STRIP:"POLYGONS"==e.type()&&(h=0==d.bd%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN);this.a.drawArrays(h,0,d.bd)}}else g(Error("Could not retrieve object for (re-)drawing!"))};A("X.renderer",$);A("X.renderer.prototype.config",$.prototype.l);A("X.renderer.prototype.config.PROGRESSBAR_ENABLED",$.prototype.l.Wc);A("X.renderer.prototype.config.PICKING_ENABLED",$.prototype.l.Vc);
A("X.renderer.prototype.config.ORDERING_ENABLED",$.prototype.l.de);A("X.renderer.prototype.width",$.prototype.width);A("X.renderer.prototype.height",$.prototype.height);A("X.renderer.prototype.canvas",$.prototype.canvas);A("X.renderer.prototype.container",$.prototype.ig);A("X.renderer.prototype.camera",$.prototype.dg);A("X.renderer.prototype.interactor",$.prototype.Ag);A("X.renderer.prototype.loader",$.prototype.sa);A("X.renderer.prototype.onProgress",$.prototype.pf);
A("X.renderer.prototype.onModified",$.prototype.hf);A("X.renderer.prototype.onHover",$.prototype.gf);A("X.renderer.prototype.resetBoundingBox",$.prototype.Ug);A("X.renderer.prototype.resetViewAndRender",$.prototype.zf);A("X.renderer.prototype.init",$.prototype.ja);A("X.renderer.prototype.addShaders",$.prototype.ve);A("X.renderer.prototype.add",$.prototype.add);A("X.renderer.prototype.onShowtime",$.prototype.Ng);A("X.renderer.prototype.get",$.prototype.get);A("X.renderer.prototype.pick",$.prototype.wf);
A("X.renderer.prototype.render",$.prototype.sb);function Xf(a,b,c,d,f){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));(!w(b)||!(b instanceof Array)||3!=b.length)&&g(Error("Invalid front direction."));(!w(c)||!(c instanceof Array)||3!=c.length)&&g(Error("Invalid up direction."));y(d)||g(Error("Invalid width."));y(f)||g(Error("Invalid height."));L.call(this);this._className="slice";this.p=a;this.Xc=b;this.Ua=c;this.Nb=d;this.ib=f;this.Ta=[0,1,0,0,1,1,1,1,1,0,0,0];this.qa()}C(Xf,L);
Xf.prototype.qa=function(){this.j.clear();var a=new N(this.Xc[0],this.Xc[1],this.Xc[2]),b=new N(this.Ua[0],this.Ua[1],this.Ua[2]),c=Sc(b,a),d=new N(this.p[0],this.p[1],this.p[2]),f=new N(1,1,1);if(1==a.x)f=new N(this.p[2],this.ib/2,this.Nb/2);else if(1==a.y)f=new N(this.Nb/2,this.p[2],this.ib/2),this.Ta=[0,0,1,0,0,1,0,1,1,1,1,0];else if(1==a.b)f=new N(this.Nb/2,this.ib/2,this.p[2]),this.Ta=[1,0,0,0,1,1,1,1,0,1,0,0];var e=Rc(c.c().z(),b.c().z()),e=new N(e.x*f.x,e.y*f.y,e.b*f.b);e.add(d);var h=Rc(c.c().z(),
b),h=new N(h.x*f.x,h.y*f.y,h.b*f.b);h.add(d);var i=Rc(c,b.c().z()),i=new N(i.x*f.x,i.y*f.y,i.b*f.b);i.add(d);var k=i,b=Rc(c,b),b=new N(b.x*f.x,b.y*f.y,b.b*f.b);b.add(d);d=h;this.j.add(e.x,e.y,e.b);this.j.add(h.x,h.y,h.b);this.j.add(i.x,i.y,i.b);this.j.add(k.x,k.y,k.b);this.j.add(b.x,b.y,b.b);this.j.add(d.x,d.y,d.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b)};A("X.slice",Xf);function Yf(){L.call(this);this._className="volume";this.p=[0,0,0];this.fa=[10,10,10];this.H=[1,1,1];this.ad=this._indexZ=this.$c=this._indexY=this.Zc=this._indexX=0;this.pe=new L;this.qe=new L;this.re=new L}C(Yf,L);
Yf.prototype.qa=function(){this.children().length=0;this.children().push(this.pe);this.children().push(this.qe);this.children().push(this.re);for(var a=0,a=0;3>a;a++){for(var b=(this.fa[a]-1)/2,c=b,d=0,d=0;d<this.fa[a];d++){var f=-b*this.H[a]+d*this.H[a],e=[[f,this.p[1],this.p[2]],[this.p[0],f,this.p[2]],[this.p[0],this.p[1],f]],f=this.children()[a].children(),h=0,i=0;0==a?(h=this.fa[2]*this.H[2]-this.H[2],i=this.fa[1]*this.H[1]-this.H[1]):1==a?(h=this.fa[0]*this.H[0]-this.H[0],i=this.fa[2]*this.H[2]-
this.H[2]):2==a&&(h=this.fa[0]*this.H[0]-this.H[0],i=this.fa[1]*this.H[1]-this.H[1]);e=new Xf(e[a],[[1,0,0],[0,1,0],[0,0,1]][a],[[0,1,0],[0,0,-1],[0,1,0]][a],h,i);e.K(d==c);f.push(e)}if(0==a)this.Zc=this._indexX=c;else if(1==a)this.$c=this._indexY=c;else if(2==a)this.ad=this._indexZ=c}this.d=p};
Yf.prototype.bc=function(){for(var a=0,a=0;3>a;a++){var b=0,c=0;if(0==a)b=this._indexX,c=this.Zc,this.Zc=this._indexX;else if(1==a)b=this._indexY,c=this.$c,this.$c=this._indexY;else if(2==a)b=this._indexZ,c=this.ad,this.ad=this._indexZ;this.children()[a].children()[parseInt(c,10)].K(r);this.children()[a].children()[parseInt(b,10)].K(p)}Yf.B.bc.call(this)};Yf.prototype.lg=t("fa");A("X.volume",Yf);A("X.volume.prototype.dimensions",Yf.prototype.lg);A("X.volume.prototype.modified",Yf.prototype.bc);function Zf(a){function b(a,b){var a=a*2*Math.PI,b=b*Math.PI,e=new Q(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));h.push(new R(c.$a(e.xa(d)),e))}this.i=[];for(var a=a||{},c=new Q(a.rd||[0,0,0]),d=a.ka||1,f=a.Td||16,a=a.lh||8,e=[],h,i=0;i<f;i++)for(var k=0;k<a;k++)h=[],b(i/f,k/a),0<k&&b((i+1)/f,k/a),k<a-1&&b((i+1)/f,(k+1)/a),b(i/f,(k+1)/a),e.push(new id(h));return kd(e)}C(Zf,S);A("CSG.sphere",Zf);function $f(a,b){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));y(b)||g(Error("Invalid radius."));L.call(this);this._className="Sphere";this.p=a;this.ld=b;this.nd=32;this.$f=16;this.qa()}C($f,L);$f.prototype.qa=function(){Hd(this,new Zf({rd:this.p,ka:this.ld,Td:this.nd,lh:this.$f}))};A("X.sphere",$f);function ag(a){function b(a,b,d){b=2*b*Math.PI;b=k.xa(Math.cos(b)).$a(o.xa(Math.sin(b)));a=c.$a(f.xa(a)).$a(b.xa(e));d=b.xa(1-Math.abs(d)).$a(h.xa(d));return new R(a,d)}this.i=[];for(var a=a||{},c=new Q(a.start||[0,-1,0]),d=new Q(a.end||[0,1,0]),f=d.ob(c),e=a.ka||1,a=a.Td||16,h=f.wb(),i=0.5<Math.abs(h.y()),k=(new Q(i,!i,0)).yc(h).wb(),o=k.yc(h).wb(),i=new R(c,h.Ic()),d=new R(d,h.wb()),l=[],n=0;n<a;n++){var m=n/a,s=(n+1)/a;l.push(new id([i,b(0,m,-1),b(0,s,-1)]));l.push(new id([b(0,s,0),b(0,m,0),b(1,
m,0),b(1,s,0)]));l.push(new id([d,b(1,s,1),b(1,m,1)]))}return kd(l)}C(ag,S);A("CSG.cylinder",ag);function bg(a,b,c){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid start position."));(!w(b)||!(b instanceof Array)||3!=b.length)&&g(Error("Invalid end position."));y(c)||g(Error("Invalid radius."));L.call(this);this._className="cylinder";this.ag=a;this.Uf=b;this.ld=c;this.nd=32;this.qa()}C(bg,L);bg.prototype.qa=function(){Hd(this,new ag({start:this.ag,end:this.Uf,ka:this.ld,Td:this.nd}))};A("X.cylinder",bg);function cg(a){this.i=[];var a=a||{},b=new Q(a.rd||[0,0,0]),c=!a.ka?[1,1,1]:a.ka.length?a.ka:[a.ka,a.ka,a.ka];return kd([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new id(a[0].map(function(f){f=new Q(b.x()+c[0]*(2*!!(f&1)-1),b.y()+c[1]*(2*!!(f&2)-1),b.b()+c[2]*(2*!!(f&4)-1));return new R(f,new Q(a[1]))}))}))}C(cg,S);A("CSG.cube",cg);function dg(a,b,c,d){(!w(a)||!(a instanceof Array)||3!=a.length)&&g(Error("Invalid center."));(!y(b)||!y(c)||!y(d))&&g(Error("Invalid radii."));L.call(this);this._className="cube";this.p=a;this.Wf=b;this.Xf=c;this.Yf=d;this.Ta=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];this.qa()}C(dg,L);dg.prototype.qa=function(){Hd(this,new cg({rd:this.p,ka:[this.Wf,this.Xf,this.Yf]}))};A("X.cube",dg);
